<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2021-11-25T12:36:36Z</date><groups><group><name>AS400</name></group><group><name>Templates</name></group></groups><templates><template><template>App Zabbix Agent</template><name>App Zabbix Agent</name><groups><group><name>Templates</name></group></groups><applications><application><name>Zabbix agent</name></application></applications><items><item><name>Host name of zabbix_agentd running</name><key>agent.hostname</key><delay>3600</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><applications><application><name>Zabbix agent</name></application></applications><triggers><trigger><expression>{diff(0)}&gt;0</expression><name>Host name of zabbix_agentd was changed on {HOST.NAME}</name><priority>INFO</priority></trigger></triggers></item><item><name>Agent ping</name><key>agent.ping</key><delay>60</delay><history>7d</history><description>The agent always returns 1 for this item. It could be used in combination with nodata() for availability check.</description><applications><application><name>Zabbix agent</name></application></applications><valuemap><name>Zabbix agent ping status</name></valuemap><triggers><trigger><expression>{nodata(5m)}=1</expression><name>Zabbix agent on {HOST.NAME} is unreachable for 5 minutes</name><priority>AVERAGE</priority></trigger></triggers></item><item><name>Version of zabbix_agent(d) running</name><key>agent.version</key><delay>3600</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><applications><application><name>Zabbix agent</name></application></applications><triggers><trigger><expression>{diff(0)}&gt;0</expression><name>Version of zabbix_agent(d) was changed on {HOST.NAME}</name><priority>INFO</priority></trigger></triggers></item></items></template><template><template>AS400</template><name>AS400</name><templates><template><name>App Zabbix Agent</name></template></templates><groups><group><name>AS400</name></group><group><name>Templates</name></group></groups><applications><application><name>ASP</name></application><application><name>CPU Usage by process</name></application><application><name>Disks</name></application><application><name>Generic</name></application><application><name>Message Queue</name></application><application><name>Output Queue</name></application></applications><items><item><name>Size of output queue $1 in library $2</name><type>ZABBIX_ACTIVE</type><key>as400.outputqueue.size[QEZDEBUG,QUSRSYS]</key><delay>900</delay><history>7d</history><applications><application><name>Output Queue</name></application></applications><triggers><trigger><expression>{last()}&gt;{$MAX_QEZ_SIZE}</expression><name>Output queue QEZDEBUG has a lot of spool files</name><priority>WARNING</priority></trigger><trigger><expression>{count(20m)}&gt;1 and {change()}&gt;{$MAX_QEZ_INCREASE}</expression><name>Output queue QEZDEBUG is growing too fast</name><priority>WARNING</priority></trigger></triggers></item><item><name>Size of output queue $1 in library $2</name><type>ZABBIX_ACTIVE</type><key>as400.outputqueue.size[QEZJOBLOG,QUSRSYS]</key><delay>900</delay><history>7d</history><applications><application><name>Output Queue</name></application></applications><triggers><trigger><expression>{last()}&gt;{$MAX_QEZ_SIZE}</expression><name>Output queue QEZJOBLOG has a lot of spool files</name><priority>WARNING</priority></trigger><trigger><expression>{count(20m)}&gt;1 and {change()}&gt;{$MAX_QEZ_INCREASE}</expression><name>Output queue QEZJOBLOG is growing too fast</name><priority>WARNING</priority></trigger></triggers></item><item><name>Size of output queue $1 in library $2</name><type>ZABBIX_ACTIVE</type><key>as400.outputqueue.size[QPRINT,QGPL]</key><delay>900</delay><history>7d</history><applications><application><name>Output Queue</name></application></applications><triggers><trigger><expression>{last()}&gt;{$MAX_QPRINT_SIZE}</expression><name>Output queue QPRINT has a lot of spool files</name><priority>WARNING</priority></trigger></triggers></item><item><name>Services availability</name><type>ZABBIX_ACTIVE</type><key>as400.services</key><delay>300</delay><history>7d</history><applications><application><name>Generic</name></application></applications></item><item><name>Messages in the queue QSYSOPR (errors)</name><type>ZABBIX_ACTIVE</type><key>eventlog[QSYSOPR,,70,,,100,skip]</key><delay>20</delay><history>7d</history><trends>0</trends><value_type>LOG</value_type><applications><application><name>Message Queue</name></application></applications><triggers><trigger><expression>{nodata(3d)}&lt;&gt;1 and {regexp(&quot;^(CPPEA02|CPI0949) &quot;)}=1</expression><name>New critical message in AS400 message queue</name><priority>HIGH</priority><type>MULTIPLE</type></trigger><trigger><expression>{nodata(7)}&lt;&gt;1 and ({regexp(&quot;^CPPEA33 &quot;)}=1 or ({logsource(&quot;^#OVERRIDE&quot;)}=0 and {regexp(&quot;^(CPI2401|CPA5201|BRM1472|BRM1392|CPA7025|CPI096E|CPI5906|CPPEA33|CPF8198|CPF9E7E|CPF9E7D) &quot;)}=0) )</expression><name>New error message in AS400 message queue</name><priority>AVERAGE</priority><type>MULTIPLE</type></trigger><trigger><expression>{nodata(7)}&lt;&gt;1 and  ({regexp(&quot;^BRM1392 &quot;)}=1 or {logsource(QCLNSYSLOG)}=0 and {regexp(&quot;^CPA7025 &quot;)}=1)</expression><name>New warning message in AS400 message queue</name><priority>WARNING</priority><type>MULTIPLE</type></trigger></triggers></item><item><name>CPU Usage for all process</name><type>ZABBIX_ACTIVE</type><key>proc.cpu.util[,,total,,,]</key><delay>60</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><applications><application><name>Generic</name></application></applications></item><item><name>Number of jobs in state $3</name><type>ZABBIX_ACTIVE</type><key>proc.num[,,LCKW,]</key><delay>300</delay><history>7d</history><applications><application><name>Generic</name></application></applications><triggers><trigger><expression>{min(#2)}&gt;0</expression><name>There are jobs in state LCKW</name><priority>WARNING</priority></trigger></triggers></item><item><name>Number of running jobs (total)</name><type>ZABBIX_ACTIVE</type><key>proc.num[,,run]</key><delay>300</delay><history>7d</history><applications><application><name>Generic</name></application></applications></item><item><name>System information</name><key>system.uname</key><delay>120</delay><history>7d</history><trends>0</trends><value_type>TEXT</value_type><applications><application><name>Generic</name></application></applications></item><item><name>Number of users</name><type>ZABBIX_ACTIVE</type><key>system.users.num</key><delay>60</delay><history>7d</history><applications><application><name>Generic</name></application></applications><triggers><trigger><expression>{nodata({$MAX_AGENT_UNAVAILABLE})}=1</expression><name>Zabbix agent (active mode) on {HOST.NAME} is unreachable</name><priority>AVERAGE</priority></trigger></triggers></item></items><discovery_rules><discovery_rule><name>Disks discovery</name><type>ZABBIX_ACTIVE</type><key>as400.disk.discovery</key><delay>3600</delay><lifetime>7d</lifetime><item_prototypes><item_prototype><name>Disk {#DSK_ID}: {#DSK_NAME} free space</name><type>ZABBIX_ACTIVE</type><key>as400.disk.size[{#DSK_SN},free]</key><delay>300</delay><history>7d</history><units>B</units><applications><application><name>Disks</name></application></applications></item_prototype><item_prototype><name>Disk {#DSK_ID}: {#DSK_NAME} free space, %</name><type>ZABBIX_ACTIVE</type><key>as400.disk.size[{#DSK_SN},pfree]</key><delay>300</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><applications><application><name>Disks</name></application></applications></item_prototype><item_prototype><name>Disk {#DSK_ID}: {#DSK_NAME} used space, %</name><type>ZABBIX_ACTIVE</type><key>as400.disk.size[{#DSK_SN},pused]</key><delay>300</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><applications><application><name>Disks</name></application></applications></item_prototype><item_prototype><name>Disk {#DSK_ID}: {#DSK_NAME} capacity</name><type>ZABBIX_ACTIVE</type><key>as400.disk.size[{#DSK_SN},total]</key><delay>3600</delay><history>7d</history><units>B</units><applications><application><name>Disks</name></application></applications></item_prototype><item_prototype><name>Disk {#DSK_ID}: {#DSK_NAME} used space</name><type>ZABBIX_ACTIVE</type><key>as400.disk.size[{#DSK_SN},used]</key><delay>300</delay><history>7d</history><units>B</units><applications><application><name>Disks</name></application></applications></item_prototype><item_prototype><name>Disk {#DSK_ID}: {#DSK_NAME} ({#DSK_TYPE} {#DSK_MODEL}, {#DSK_SN}) status</name><type>ZABBIX_ACTIVE</type><key>as400.disk.state[{#DSK_SN}]</key><delay>300</delay><history>7d</history><applications><application><name>Disks</name></application></applications><valuemap><name>AS400 disk status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{last()}&lt;&gt;1 and {last()}&lt;&gt;4294967295</expression><name>Disk {#DSK_ID}: {#DSK_NAME} ({#DSK_TYPE} {#DSK_MODEL}, {#DSK_SN}) failed</name><priority>AVERAGE</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>Processes discovery</name><type>ZABBIX_ACTIVE</type><key>proc.cpu.util.discovery[{$MAX_CPU_FOR_DISCOVERY}]</key><delay>60</delay><lifetime>0</lifetime><item_prototypes><item_prototype><name>CPU Usage by process $6/$2/$1</name><type>ZABBIX_ACTIVE</type><key>proc.cpu.util[{#NAME},{#USER},total,,avg1,{#NUM}]</key><delay>60</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><applications><application><name>CPU Usage by process</name></application></applications><trigger_prototypes><trigger_prototype><expression>{count(#6,{$MAX_CPU_PER_PROCESS_PUSED},ge)}=6</expression><name>Job {#NUM}/{#USER}/{#NAME} has large CPU usage (&gt;{$MAX_CPU_PER_PROCESS_PUSED}%)</name><priority>WARNING</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>ASP discovery</name><type>ZABBIX_ACTIVE</type><key>vfs.fs.discovery</key><delay>3600</delay><lifetime>7d</lifetime><item_prototypes><item_prototype><name>ASP{#FSNAME} free</name><type>ZABBIX_ACTIVE</type><key>vfs.fs.size[{#FSNAME},free]</key><delay>300</delay><history>7d</history><units>B</units><applications><application><name>ASP</name></application></applications></item_prototype><item_prototype><name>ASP{#FSNAME} free, %</name><type>ZABBIX_ACTIVE</type><key>vfs.fs.size[{#FSNAME},pfree]</key><delay>300</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><applications><application><name>ASP</name></application></applications></item_prototype><item_prototype><name>ASP{#FSNAME} pused, %</name><type>ZABBIX_ACTIVE</type><key>vfs.fs.size[{#FSNAME},pused]</key><delay>300</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><applications><application><name>ASP</name></application></applications></item_prototype><item_prototype><name>ASP{#FSNAME} capacity</name><type>ZABBIX_ACTIVE</type><key>vfs.fs.size[{#FSNAME},total]</key><delay>3600</delay><history>7d</history><units>B</units><applications><application><name>ASP</name></application></applications></item_prototype><item_prototype><name>ASP{#FSNAME} used</name><type>ZABBIX_ACTIVE</type><key>vfs.fs.size[{#FSNAME},used]</key><delay>300</delay><history>7d</history><units>B</units><applications><application><name>ASP</name></application></applications></item_prototype><item_prototype><name>ASP{#FSNAME} status</name><type>ZABBIX_ACTIVE</type><key>vfs.fs.state[{#FSNAME}]</key><delay>300</delay><history>7d</history><applications><application><name>ASP</name></application></applications><valuemap><name>AS400 ASP status</name></valuemap></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>{AS400:vfs.fs.size[{#FSNAME},pused].min(#2)}&gt;{$MAX_DISK_PUSED:&quot;{#FSNAME}&quot;} and {AS400:vfs.fs.state[{#FSNAME}].count(#2,1)}=0 and {AS400:vfs.fs.state[{#FSNAME}].count(#2,2)}=0</expression><name>ASP{#FSNAME} used more than {$MAX_DISK_PUSED:&quot;{#FSNAME}&quot;}%</name><priority>AVERAGE</priority></trigger_prototype></trigger_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$MAX_CPU_FOR_DISCOVERY}</macro><value>30</value></macro><macro><macro>{$MAX_CPU_PER_PROCESS_PUSED}</macro><value>20</value></macro><macro><macro>{$MAX_DISK_PUSED}</macro><value>65</value></macro><macro><macro>{$MAX_QEZ_INCREASE}</macro><value>400</value></macro><macro><macro>{$MAX_QEZ_SIZE}</macro><value>50000</value></macro><macro><macro>{$MAX_QPRINT_SIZE}</macro><value>15000</value></macro></macros></template></templates><value_maps><value_map><name>AS400 ASP status</name><mappings><mapping><value>0</value><newvalue>no status</newvalue></mapping><mapping><value>1</value><newvalue>varyoff</newvalue></mapping><mapping><value>2</value><newvalue>varyon</newvalue></mapping><mapping><value>3</value><newvalue>active</newvalue></mapping><mapping><value>4</value><newvalue>available</newvalue></mapping></mappings></value_map><value_map><name>AS400 disk status</name><mappings><mapping><value>0</value><newvalue>There is no unit control value</newvalue></mapping><mapping><value>1</value><newvalue>The disk unit is active</newvalue></mapping><mapping><value>2</value><newvalue>The disk unit has failed</newvalue></mapping><mapping><value>3</value><newvalue>Some other disk unit in the disk subsystem has failed</newvalue></mapping><mapping><value>4</value><newvalue>Hardware failure (affects performance, but not the function)</newvalue></mapping><mapping><value>5</value><newvalue>Hardware failure (does not affect the function or performance)</newvalue></mapping><mapping><value>6</value><newvalue>The disk unit's parity protection is being rebuilt</newvalue></mapping><mapping><value>7</value><newvalue>The disk unit is not ready</newvalue></mapping><mapping><value>8</value><newvalue>The disk unit is write protected</newvalue></mapping><mapping><value>9</value><newvalue>The disk unit is busy</newvalue></mapping><mapping><value>10</value><newvalue>The disk unit is not operational</newvalue></mapping><mapping><value>11</value><newvalue>The disk unit has returned a status that is not recognizable</newvalue></mapping><mapping><value>12</value><newvalue>The disk unit cannot be accessed</newvalue></mapping><mapping><value>13</value><newvalue>The disk unit is read/write protected</newvalue></mapping><mapping><value>4294967295</value><newvalue>Not configured or not attached</newvalue></mapping></mappings></value_map><value_map><name>Zabbix agent ping status</name><mappings><mapping><value>1</value><newvalue>Up</newvalue></mapping></mappings></value_map></value_maps></zabbix_export>
