zabbix_export:
  version: '7.0'
  templates:
    - uuid: 8255b5076e074440a3fbbcccd1a153e7
      template: 'Template_SNMP_Lenovo_XCC'
      name: 'Template SNMP Lenovo XClarity Controller (XCC)'
      description: 'SNMP monitoring for Lenovo XClarity Controller (XCC): overall health, temperatures, fans, voltages, PSU modules.'
      groups:
        - name: 'Templates'
      items:
        - uuid: d59d43d673ae42fbbabcc178eb3f4848
          name: 'XCC System health status'
          type: SNMP_AGENT
          key: 'lenovo.xcc.systemHealthStat'
          delay: 1m
          history: 90d
          trends: 365d
          value_type: UNSIGNED
          snmp_oid: '1.3.6.1.4.1.19046.11.1.1.4.1.0'
          description: 'Values: nonRecoverable(0), critical(2), nonCritical(4), normal(255)'
          tags:
            - tag: component
              value: health
          triggers:
            - uuid: e8de790b99304734bd90338da9776aea
              name: 'XCC system health is NON-RECOVERABLE'
              expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.systemHealthStat)=0'
              priority: DISASTER
            - uuid: 9ab89b495ee147fbb8337871fc1837c9
              name: 'XCC system health is CRITICAL'
              expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.systemHealthStat)=2'
              priority: HIGH
            - uuid: b89c558257e7436bb794c83f422841b1
              name: 'XCC system health is NON-CRITICAL'
              expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.systemHealthStat)=4'
              priority: WARNING

        - uuid: ed88fab03cae4cda97495f46ec3cb551
          name: 'System description (sysDescr)'
          type: SNMP_AGENT
          key: 'snmp.sysDescr'
          delay: 6h
          history: 90d
          trends: 365d
          value_type: TEXT
          snmp_oid: '1.3.6.1.2.1.1.1.0'
          tags:
            - tag: component
              value: system

        - uuid: a70524591b6543fbb367a831e011777c
          name: 'System uptime (sysUpTime)'
          type: SNMP_AGENT
          key: 'snmp.sysUpTime'
          delay: 5m
          history: 90d
          trends: 365d
          value_type: UNSIGNED
          units: uptime
          snmp_oid: '1.3.6.1.2.1.1.3.0'
          tags:
            - tag: component
              value: system
      discovery_rules:
        - uuid: a9713877c99a4326be9f742d940745a7
          name: 'Temperature sensors discovery (Lenovo XCC)'
          type: SNMP_AGENT
          key: 'lenovo.xcc.temp.discovery'
          delay: 1h
          lifetime: 30d
          snmp_oid: 'discovery[{#IDX},1.3.6.1.4.1.19046.11.1.1.1.2.1.1,{#NAME},1.3.6.1.4.1.19046.11.1.1.1.2.1.2]'
          graph_prototypes:
            - uuid: b1d1b5facc0e49889bdb97bb4f0316cf
              name: 'Temp {#NAME}: Reading & CritHigh'
              graph_items:
                - sortorder: '0'
                  color: '00A0B0'
                  item:
                    host: 'Template_SNMP_Lenovo_XCC'
                    key: 'lenovo.xcc.temp.reading[{#IDX}]'
                - sortorder: '1'
                  color: 'CC0000'
                  item:
                    host: 'Template_SNMP_Lenovo_XCC'
                    key: 'lenovo.xcc.temp.critHigh[{#IDX}]'
          item_prototypes:
            - uuid: e5477c2718a14bbdbd81ce515336e924
              name: 'Temp {#NAME}: Reading'
              type: SNMP_AGENT
              key: 'lenovo.xcc.temp.reading[{#IDX}]'
              delay: 1m
              history: 90d
              trends: 365d
              value_type: FLOAT
              units: '°C'
              snmp_oid: '1.3.6.1.4.1.19046.11.1.1.1.2.1.3.{#IDX}'
              tags:
                - tag: component
                  value: temperature
            - uuid: bb460087bc944bea9919ce82557e1526
              name: 'Temp {#NAME}: Critical high limit'
              type: SNMP_AGENT
              key: 'lenovo.xcc.temp.critHigh[{#IDX}]'
              delay: 1h
              history: 90d
              trends: 365d
              value_type: FLOAT
              units: '°C'
              snmp_oid: '1.3.6.1.4.1.19046.11.1.1.1.2.1.6.{#IDX}'
              tags:
                - tag: component
                  value: temperature
              trigger_prototypes:
                - uuid: 21b8b38929a0475e91675467bae181cc
                  name: 'Temperature {#NAME} is above critical high limit'
                  expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.temp.reading[{#IDX}])>last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.temp.critHigh[{#IDX}])'
                  priority: HIGH

        - uuid: 6f64a3aca74a47e9978e5ce9f955d145
          name: 'Fan sensors discovery (Lenovo XCC)'
          type: SNMP_AGENT
          key: 'lenovo.xcc.fan.discovery'
          delay: 1h
          lifetime: 30d
          snmp_oid: 'discovery[{#IDX},1.3.6.1.4.1.19046.11.1.1.3.2.1.1,{#NAME},1.3.6.1.4.1.19046.11.1.1.3.2.1.2]'
          graph_prototypes:
            - uuid: e562d583241048099ba807cf83f45d5d
              name: 'Fan {#NAME}: Speed & CritLow'
              graph_items:
                - sortorder: '0'
                  color: '2774A4'
                  item:
                    host: 'Template_SNMP_Lenovo_XCC'
                    key: 'lenovo.xcc.fan.speed[{#IDX}]'
                - sortorder: '1'
                  color: 'FF9900'
                  item:
                    host: 'Template_SNMP_Lenovo_XCC'
                    key: 'lenovo.xcc.fan.critLow[{#IDX}]'
          item_prototypes:
            - uuid: fd31deadbd0b40ac9c50d944cf445c20
              name: 'Fan {#NAME}: Speed'
              type: SNMP_AGENT
              key: 'lenovo.xcc.fan.speed[{#IDX}]'
              delay: 1m
              history: 90d
              trends: 365d
              value_type: UNSIGNED
              units: rpm
              snmp_oid: '1.3.6.1.4.1.19046.11.1.1.3.2.1.3.{#IDX}'
              tags:
                - tag: component
                  value: fan
            - uuid: b284ac7973804ee1aca5d4f170be9dda
              name: 'Fan {#NAME}: Critical low limit'
              type: SNMP_AGENT
              key: 'lenovo.xcc.fan.critLow[{#IDX}]'
              delay: 1h
              history: 90d
              trends: 365d
              value_type: UNSIGNED
              units: rpm
              snmp_oid: '1.3.6.1.4.1.19046.11.1.1.3.2.1.8.{#IDX}'
              tags:
                - tag: component
                  value: fan
              trigger_prototypes:
                - uuid: cc4c85dd7a9f4062aa82afb3dfcf4718
                  name: 'Fan {#NAME} speed is below critical low limit'
                  expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.fan.speed[{#IDX}])<last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.fan.critLow[{#IDX}])'
                  priority: HIGH

        - uuid: 90d95861a2ab495e9dfd7d507cfa130a
          name: 'Voltage sensors discovery (Lenovo XCC)'
          type: SNMP_AGENT
          key: 'lenovo.xcc.volt.discovery'
          delay: 6h
          lifetime: 30d
          snmp_oid: 'discovery[{#IDX},1.3.6.1.4.1.19046.11.1.1.2.2.1.1,{#NAME},1.3.6.1.4.1.19046.11.1.1.2.2.1.2]'
          graph_prototypes:
            - uuid: 3a5b291a111f47d7aeda5ac8a4fc8e09
              name: 'Voltage {#NAME}: Reading & Limits'
              graph_items:
                - sortorder: '0'
                  color: '00A0B0'
                  item:
                    host: 'Template_SNMP_Lenovo_XCC'
                    key: 'lenovo.xcc.volt.reading[{#IDX}]'
                - sortorder: '1'
                  color: 'CC0000'
                  item:
                    host: 'Template_SNMP_Lenovo_XCC'
                    key: 'lenovo.xcc.volt.critHigh[{#IDX}]'
                - sortorder: '2'
                  color: 'FF9900'
                  item:
                    host: 'Template_SNMP_Lenovo_XCC'
                    key: 'lenovo.xcc.volt.critLow[{#IDX}]'
          item_prototypes:
            - uuid: 16742d3e786d4b5db06005faa7ddeba7
              name: 'Voltage {#NAME}: Reading'
              type: SNMP_AGENT
              key: 'lenovo.xcc.volt.reading[{#IDX}]'
              delay: 5m
              history: 90d
              trends: 365d
              value_type: FLOAT
              units: V
              snmp_oid: '1.3.6.1.4.1.19046.11.1.1.2.2.1.3.{#IDX}'
              tags:
                - tag: component
                  value: voltage
            - uuid: c0fb1207640841cc85a4768d686b4316
              name: 'Voltage {#NAME}: Critical high limit'
              type: SNMP_AGENT
              key: 'lenovo.xcc.volt.critHigh[{#IDX}]'
              delay: 6h
              history: 90d
              trends: 365d
              value_type: FLOAT
              units: V
              snmp_oid: '1.3.6.1.4.1.19046.11.1.1.2.2.1.6.{#IDX}'
              tags:
                - tag: component
                  value: voltage
            - uuid: 1b44e8e6d23d404c94a57c06b6e106a9
              name: 'Voltage {#NAME}: Critical low limit'
              type: SNMP_AGENT
              key: 'lenovo.xcc.volt.critLow[{#IDX}]'
              delay: 6h
              history: 90d
              trends: 365d
              value_type: FLOAT
              units: V
              snmp_oid: '1.3.6.1.4.1.19046.11.1.1.2.2.1.9.{#IDX}'
              tags:
                - tag: component
                  value: voltage
              trigger_prototypes:
                - uuid: 98d09301a3d74a31a49bf48e7070fb10
                  name: 'Voltage {#NAME} is above critical high limit'
                  expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.volt.reading[{#IDX}])>last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.volt.critHigh[{#IDX}])'
                  priority: HIGH
                - uuid: c35e20df292b473d97a35bdde8fde07b
                  name: 'Voltage {#NAME} is below critical low limit'
                  expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.volt.reading[{#IDX}])<last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.volt.critLow[{#IDX}])'
                  priority: HIGH

        - uuid: 4ffb0c8af46a49f0b3c049fafd29f6cb
          name: 'Power modules discovery (Lenovo XCC)'
          type: SNMP_AGENT
          key: 'lenovo.xcc.psu.discovery'
          delay: 6h
          lifetime: 30d
          snmp_oid: 'discovery[{#IDX},1.3.6.1.4.1.19046.11.1.1.11.2.1.1,{#NAME},1.3.6.1.4.1.19046.11.1.1.11.2.1.2]'
          item_prototypes:
            - uuid: b4a5c387c6414f1baa2cf38426f4ae5a
              name: 'PSU {#NAME}: Health status'
              type: SNMP_AGENT
              key: 'lenovo.xcc.psu.health[{#IDX}]'
              delay: 5m
              history: 90d
              trends: 365d
              value_type: TEXT
              snmp_oid: '1.3.6.1.4.1.19046.11.1.1.11.2.1.6.{#IDX}'
              tags:
                - tag: component
                  value: psu

        - uuid: 51e99ccb91d24cafb7b2378f16499ca2
          name: 'System health summary discovery (Lenovo XCC)'
          type: SNMP_AGENT
          key: 'lenovo.xcc.healthsum.discovery'
          delay: 6h
          lifetime: 30d
          snmp_oid: 'discovery[{#IDX},1.3.6.1.4.1.19046.11.1.1.4.2.1.1,{#DESC},1.3.6.1.4.1.19046.11.1.1.4.2.1.3]'
          item_prototypes:
            - uuid: b28e5859e9274df08debcb82cfc022a6
              name: 'Health summary {#DESC}: Severity'
              type: SNMP_AGENT
              key: 'lenovo.xcc.healthsum.sev[{#IDX}]'
              delay: 5m
              history: 90d
              trends: 365d
              value_type: UNSIGNED
              snmp_oid: '1.3.6.1.4.1.19046.11.1.1.4.2.1.2.{#IDX}'
              tags:
                - tag: component
                  value: health
              trigger_prototypes:
                - uuid: 3340600a5cb34742913db9bba6bc2c4d
                  name: 'Health summary {#DESC} is non-recoverable'
                  expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.healthsum.sev[{#IDX}])=0'
                  priority: DISASTER
                - uuid: 79e12d7c5e69469bb1ffa6f7cff16431
                  name: 'Health summary {#DESC} is critical'
                  expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.healthsum.sev[{#IDX}])=2'
                  priority: HIGH
                - uuid: 4a061c74155b473f953503b61f9d4b4d
                  name: 'Health summary {#DESC} is non-critical'
                  expression: 'last(/Template_SNMP_Lenovo_XCC/lenovo.xcc.healthsum.sev[{#IDX}])=4'
                  priority: WARNING
  graphs:
    - uuid: a9845e2299e04b86a42fdc80ed6ea3dc
      name: 'XCC Overview: Health & Uptime'
      graph_items:
        - sortorder: '0'
          color: '1A7C11'
          item:
            host: 'Template_SNMP_Lenovo_XCC'
            key: 'lenovo.xcc.systemHealthStat'
        - sortorder: '1'
          color: '2774A4'
          item:
            host: 'Template_SNMP_Lenovo_XCC'
            key: 'snmp.sysUpTime'
  triggers: []
