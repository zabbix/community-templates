zabbix_export:
  version: '6.0'
  date: '2021-11-21T22:06:13Z'
  groups:
    -
      uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
      name: Templates/Applications
  templates:
    -
      uuid: dcdb64c465b9412782a2ea4c88c32d30
      template: 'App Solr'
      name: 'App Solr'
      description: |
        ## Description
        
        Template for monitoring Solr using json statistics. http://{USERNAME}@{PASSWORD}:{HOST.CONN}/solr/admin/metrics
        
        ## Overview
        
        **Zabbix Template Solr statistics**
        -----------------------------------
        
        
         Template for monitoring Solr using JSON statistics.
        
        
         
        
        
        **Versions**
        ------------
        
        
         I tested this using zabbix 5.0.9 and Solr 8.6.3, but maybe it works with different versions.
        
        
         
        
        
        **Requirements**
        ----------------
        
        
         Zabbix version > 5.0 because template is using HTTP agent, Dependent items and JSON Path. You need to setup user and password for accessing Solr statistics JSON:
        
        
        * [http://{USERNAME}:{PASSWORD}@{HOST.CONN}/solr/admin/metrics](http://{USERNAME}@{PASSWORD}{HOST.CONN})
        
        
         
        
        
        **Installation**
        ----------------
        
        
        * Download Zabbix template
        * Import the template on Zabbix
        * Create host on Zabbix and apply the template (I have configured to connect to DNS name, because it will be used in {HOST.CONN})
        * On host configuration, modify macros {$SOLR\_USERNAME} and {$SOLR\_PASSWORD} with the information you created.
        * You can change macros {$PROTOCOL}, {$URI} from host and/or template to your environment
        
        
        ## Author
        
        Felipe de Moura Vieira
        
        
      groups:
        -
          name: Templates/Applications
      items:
        -
          uuid: da57c58d941a4195ba531dc8f9a7796d
          name: 'Solr: Java process number'
          key: 'proc.num[java,,,start.jar]'
          delay: '180'
          history: 7d
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
          triggers:
            -
              uuid: 505eae9da8334201942902e92b9a405f
              expression: 'max(/App Solr/proc.num[java,,,start.jar],300s)=0'
              name: 'SOLR is not running'
              priority: HIGH
        -
          uuid: 1267919b34c843fe8b98c38ed4ad1699
          name: 'Solr: JVM metrics get status'
          type: HTTP_AGENT
          key: solr.jvm.getStatus
          delay: 5m
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''metrics''][''solr.jvm'']'
          url: '{$PROTOCOL}://{$SOLR_USERNAME}:{$SOLR_PASSWORD}@{HOST.CONN}{$URI}'
          query_fields:
            -
              name: group
              value: solr.jvm
            -
              name: wt
              value: json
            -
              name: compact
              value: 'true'
          tags:
            -
              tag: Application
              value: 'Solr: Raw data'
        -
          uuid: de92e54454ad4c0eb7167bdaa5b1f143
          name: 'Solr: JVM memory heap commited'
          type: DEPENDENT
          key: solr.jvm.memory.heap.committed
          delay: '0'
          history: 7d
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.heap.committed'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 0c54028886ca44d5991c8339a1539467
          name: 'Solr: JVM memory heap max'
          type: DEPENDENT
          key: solr.jvm.memory.heap.max
          delay: '0'
          history: 7d
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.heap.max'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: cc1e6251f95244289151bc7deb412241
          name: 'Solr: JVM memory heap usage'
          type: DEPENDENT
          key: solr.jvm.memory.heap.usage
          delay: '0'
          history: 7d
          units: '%'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.heap.usage'']'
            -
              type: MULTIPLIER
              parameters:
                - '100'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 110307aa423042a3a4d33ab4b43ca11b
          name: 'Solr: JVM memory heap used'
          type: DEPENDENT
          key: solr.jvm.memory.heap.used
          delay: '0'
          history: 7d
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.heap.used'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: a912cbdccc87414dbd011fd8811fcf17
          name: 'Solr: JVM memory non-heap commited'
          type: DEPENDENT
          key: solr.jvm.memory.non-heap.committed
          delay: '0'
          history: 7d
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.non-heap.committed'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 616d7a4f21ba40cc8cba47dbc5bdc06d
          name: 'Solr: JVM memory non-heap max'
          type: DEPENDENT
          key: solr.jvm.memory.non-heap.max
          delay: '0'
          history: 7d
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.non-heap.max'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 6344d9f5a6e443fea9ba8a991ece7d2e
          name: 'Solr: JVM memory non-heap usage'
          type: DEPENDENT
          key: solr.jvm.memory.non-heap.usage
          delay: '0'
          history: 7d
          units: '%'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.non-heap.usage'']'
            -
              type: MULTIPLIER
              parameters:
                - '100'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 441a6feaf65b4e7dbd931307d0a6ad13
          name: 'Solr: JVM memory non-heap used'
          type: DEPENDENT
          key: solr.jvm.memory.non-heap.used
          delay: '0'
          history: 7d
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.non-heap.used'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 97104f98d6de4948b24ea7f3b954551b
          name: 'Solr: JVM memory total commited'
          type: DEPENDENT
          key: solr.jvm.memory.total.committed
          delay: '0'
          history: 7d
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.total.committed'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 8f558826a51748dba73630762dbb1e1d
          name: 'Solr: JVM memory total max'
          type: DEPENDENT
          key: solr.jvm.memory.total.max
          delay: '0'
          history: 7d
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.total.max'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 2d0293f6784c45e5905026a022b4a11f
          name: 'Solr: JVM memory total used'
          type: DEPENDENT
          key: solr.jvm.memory.total.used
          delay: '0'
          history: 7d
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''memory.total.used'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 19ab3ce71e9c44b789b49cd196882c2f
          name: 'Solr: JVM OS max file descriptors'
          type: DEPENDENT
          key: solr.jvm.os.maxFileDescriptorCount
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''os.maxFileDescriptorCount'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: a858c4a49aef46bfab2c78904fa7e3a9
          name: 'Solr: JVM OS open file descriptors'
          type: DEPENDENT
          key: solr.jvm.os.openFileDescriptorCount
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''os.openFileDescriptorCount'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 7a59cddbbd58487da751ff6938cd5b52
          name: 'Solr: JVM OS Process CPU Load'
          type: DEPENDENT
          key: solr.jvm.os.processCpuLoad
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''os.processCpuLoad'']'
            -
              type: MULTIPLIER
              parameters:
                - '100'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 00da714cb3df4dfe8d258548151e588a
          name: 'Solr: JVM Threads Blocked Count'
          type: DEPENDENT
          key: solr.jvm.threads.blocked.count
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''threads.blocked.count'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: d3e56466a67c4baa9ece6c0ed6bf84c7
          name: 'Solr: JVM Threads Count'
          type: DEPENDENT
          key: solr.jvm.threads.count
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''threads.count'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 2e531f7f95a64fe484fadf4cd78044e6
          name: 'Solr: JVM Threads Daemon Count'
          type: DEPENDENT
          key: solr.jvm.threads.daemon.count
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''threads.daemon.count'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: f4eade05edd04deca23b1883c6d22fbd
          name: 'Solr: JVM Threads Deadlock Count'
          type: DEPENDENT
          key: solr.jvm.threads.deadlock.count
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''threads.deadlock.count'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 0f3aa0cc47034313b90d75a31b47c724
          name: 'Solr: JVM Threads Runnable Count'
          type: DEPENDENT
          key: solr.jvm.threads.runnable.count
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''threads.runnable.count'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: 78dcbd4521e74090a6120bab3d19b8e8
          name: 'Solr: JVM Threads Terminated Count'
          type: DEPENDENT
          key: solr.jvm.threads.terminated.count
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''threads.terminated.count'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
        -
          uuid: f6f77af84b0448c39984183979ea426e
          name: 'Solr: JVM Threads Waiting Count'
          type: DEPENDENT
          key: solr.jvm.threads.waiting.count
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[''threads.waiting.count'']'
          master_item:
            key: solr.jvm.getStatus
          tags:
            -
              tag: Application
              value: 'Solr: JVM'
      discovery_rules:
        -
          uuid: 3baeaaa640844879900626847448393e
          name: 'Solr: Core Discovery'
          type: HTTP_AGENT
          key: solr.core.discovery
          delay: 60m
          lifetime: 0d
          description: 'Discovers core List'
          item_prototypes:
            -
              uuid: 8d40b5a4fc6749fca217503ddba727a0
              name: 'Solr: Core {#CORENAME} document cache - evictions'
              type: DEPENDENT
              key: 'solr.core.documentCache.evictions[{#CORENAME}]'
              delay: '0'
              history: 7d
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''CACHE.searcher.documentCache''][''evictions'']'
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 5871aa4b987e47e2aaedbafb69656aa7
              name: 'Solr: Core {#CORENAME} document cache - hitratio'
              type: DEPENDENT
              key: 'solr.core.documentCache.hitratio[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''CACHE.searcher.documentCache''][''hitratio'']'
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: de663c25a9454c36b7e1ba20b9cff874
              name: 'Solr: Core {#CORENAME} document cache - hits/sec'
              type: DEPENDENT
              key: 'solr.core.documentCache.hits[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''CACHE.searcher.documentCache''][''hits'']'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: d6ab484a00334a59948a079fb016da27
              name: 'Solr: Core {#CORENAME} document cache - inserts/sec'
              type: DEPENDENT
              key: 'solr.core.documentCache.inserts[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''CACHE.searcher.documentCache''][''inserts'']'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: bbe07657373c4f41afb55006096e8a4e
              name: 'Solr: Core {#CORENAME} filter cache - evictions'
              type: DEPENDENT
              key: 'solr.core.filterCache.evictions[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''CACHE.searcher.filterCache''][''evictions'']'
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 2ebabbffbcca42ef951b747b7e0b47d2
              name: 'Solr: Core {#CORENAME} filter cache - hitratio'
              type: DEPENDENT
              key: 'solr.core.filterCache.hitratio[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''CACHE.searcher.filterCache''][''hitratio'']'
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: eb15d5c5b90a47abb0955526cb90b60d
              name: 'Solr: Core {#CORENAME} filter cache - hits/sec'
              type: DEPENDENT
              key: 'solr.core.filterCache.hits[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''CACHE.searcher.filterCache''][''hits'']'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 6037e31e96854952a50cd1d7cab843ab
              name: 'Solr: Core {#CORENAME} filter cache - inserts/sec'
              type: DEPENDENT
              key: 'solr.core.filterCache.inserts[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''CACHE.searcher.filterCache''][''inserts'']'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 3e2cb71f7af449b4b3fb6f81638d9100
              name: 'Solr: Core "{#CORENAME}" metrics get status'
              type: HTTP_AGENT
              key: 'solr.core.getStatus[{#CORENAME}]'
              delay: 5m
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''metrics''][''solr.core.{#CORENAME}'']'
              url: '{$PROTOCOL}://{$SOLR_USERNAME}:{$SOLR_PASSWORD}@{HOST.CONN}{$URI}'
              query_fields:
                -
                  name: group
                  value: 'solr.core.{#CORENAME}'
                -
                  name: prefix
                  value: UPDATE
                -
                  name: prefix
                  value: CACHE
                -
                  name: prefix
                  value: QUERY
                -
                  name: prefix
                  value: SEARCHER
                -
                  name: prefix
                  value: INDEX
                -
                  name: wt
                  value: json
                -
                  name: compact
                  value: 'true'
              tags:
                -
                  tag: Application
                  value: 'Solr: Raw data'
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 08864aa63ff34cb58b686e67dd464351
              name: 'Solr: Core {#CORENAME} index - size'
              type: DEPENDENT
              key: 'solr.core.index.size[{#CORENAME}]'
              delay: '0'
              history: 7d
              units: B
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''INDEX.sizeInBytes'']'
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 19476455a2544e8cb077c7d018e197a3
              name: 'Solr: Core {#CORENAME} query result cache - hits/sec'
              type: DEPENDENT
              key: 'solr.core.queryResultCache.hits[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''CACHE.searcher.queryResultCache''][''hits'']'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 5f8c68f1ecb74a50b30bf94d3788c60d
              name: 'Solr: Core {#CORENAME} searcher - numDocs'
              type: DEPENDENT
              key: 'solr.core.searcher.numDocs[{#CORENAME}]'
              delay: '0'
              history: 7d
              description: 'Document count'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''SEARCHER.searcher.numDocs'']'
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 4a717ad97c5b4a4bb088c6630a95a1a4
              name: 'Solr: Core {#CORENAME} select - errors/sec'
              type: DEPENDENT
              key: 'solr.core.select.errors.count[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''QUERY./select.errors''][''count'']'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: a8908517f2d84e3c84af837c227278da
              name: 'Solr: Core {#CORENAME} select - requests/sec'
              type: DEPENDENT
              key: 'solr.core.select.requests[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''QUERY./select.requests'']'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 82f648ec3bd641ebb279822eef68b9a4
              name: 'Solr: Core {#CORENAME} select - requestTimes.5minRate'
              type: DEPENDENT
              key: 'solr.core.select.requestTimes.5minRate[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''QUERY./select.requestTimes''][''5minRate'']'
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: b4f2c23ea808483987a2ea4bae3f4f3d
              name: 'Solr: Core {#CORENAME} select - requestTimes/sec'
              type: DEPENDENT
              key: 'solr.core.select.requestTimes.count[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''QUERY./select.requestTimes''][''count'']'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 501a9827cf904c67b48070529c69da01
              name: 'Solr: Core {#CORENAME} select - requestTimes.meanRate'
              type: DEPENDENT
              key: 'solr.core.select.requestTimes.meanRate[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''QUERY./select.requestTimes''][''meanRate'']'
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 0851940d7b764366944d175ed69815e3
              name: 'Solr: Core {#CORENAME} select - requestTimes.median'
              type: DEPENDENT
              key: 'solr.core.select.requestTimes.median_ms[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: s
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''QUERY./select.requestTimes''][''meanRate'']'
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.001'
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
            -
              uuid: 64ab44fd547a41458b3931d58ef5eb97
              name: 'Solr: Core {#CORENAME} select - timeouts/sec'
              type: DEPENDENT
              key: 'solr.core.select.timeouts.count[{#CORENAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''QUERY./select.timeouts''][''count'']'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'solr.core.getStatus[{#CORENAME}]'
              tags:
                -
                  tag: Application
                  value: 'Solr: {#CORENAME}'
          graph_prototypes:
            -
              uuid: 210cb99224fa4746aac0b0f0b2147acb
              name: 'Solr: Core {#CORENAME} document cache'
              graph_items:
                -
                  sortorder: '1'
                  color: 199C0D
                  item:
                    host: 'App Solr'
                    key: 'solr.core.documentCache.evictions[{#CORENAME}]'
                -
                  sortorder: '2'
                  color: F63100
                  item:
                    host: 'App Solr'
                    key: 'solr.core.documentCache.hitratio[{#CORENAME}]'
                -
                  sortorder: '3'
                  drawtype: BOLD_LINE
                  color: 2774A4
                  yaxisside: RIGHT
                  item:
                    host: 'App Solr'
                    key: 'solr.core.documentCache.hits[{#CORENAME}]'
                -
                  sortorder: '4'
                  drawtype: BOLD_LINE
                  color: F7941D
                  yaxisside: RIGHT
                  item:
                    host: 'App Solr'
                    key: 'solr.core.documentCache.inserts[{#CORENAME}]'
            -
              uuid: 2ecdd3577f6d4b2da3c76102f6b64bb5
              name: 'Solr: Core {#CORENAME} filter cache'
              graph_items:
                -
                  sortorder: '1'
                  color: 199C0D
                  item:
                    host: 'App Solr'
                    key: 'solr.core.filterCache.evictions[{#CORENAME}]'
                -
                  sortorder: '2'
                  color: F63100
                  item:
                    host: 'App Solr'
                    key: 'solr.core.filterCache.hitratio[{#CORENAME}]'
                -
                  sortorder: '3'
                  drawtype: BOLD_LINE
                  color: 2774A4
                  yaxisside: RIGHT
                  item:
                    host: 'App Solr'
                    key: 'solr.core.filterCache.hits[{#CORENAME}]'
                -
                  sortorder: '4'
                  drawtype: BOLD_LINE
                  color: F7941D
                  yaxisside: RIGHT
                  item:
                    host: 'App Solr'
                    key: 'solr.core.filterCache.inserts[{#CORENAME}]'
            -
              uuid: 950d1ff40685461f88ccdcf151ff9640
              name: 'Solr: Core {#CORENAME} index size'
              graph_items:
                -
                  sortorder: '1'
                  drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'App Solr'
                    key: 'solr.core.index.size[{#CORENAME}]'
          url: '{$PROTOCOL}://{$SOLR_USERNAME}:{$SOLR_PASSWORD}@{HOST.CONN}{$URI}'
          query_fields:
            -
              name: prefix
              value: CORE.coreName
            -
              name: wt
              value: json
            -
              name: compact
              value: 'true'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$..[''CORE.coreName'']'
            -
              type: STR_REPLACE
              parameters:
                - '['
                - '[{"{#CORENAME}":'
            -
              type: STR_REPLACE
              parameters:
                - ','
                - '},{"{#CORENAME}":'
            -
              type: STR_REPLACE
              parameters:
                - ']'
                - '}]'
      macros:
        -
          macro: '{$PROTOCOL}'
          value: http
        -
          macro: '{$SOLR_PASSWORD}'
          value: NEWPASS
        -
          macro: '{$SOLR_USERNAME}'
          value: NEWUSER
        -
          macro: '{$URI}'
          value: /solr/admin/metrics
      dashboards:
        -
          uuid: 40e338f2df3b438dad0fe91ff11f0685
          name: 'Solr: JVM'
          pages:
            -
              widgets:
                -
                  type: GRAPH_CLASSIC
                  width: '8'
                  height: '6'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '0'
                    -
                      type: GRAPH
                      name: graphid
                      value:
                        name: 'Solr: JVM memory total'
                        host: 'App Solr'
                -
                  type: GRAPH_CLASSIC
                  x: '8'
                  width: '8'
                  height: '6'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '0'
                    -
                      type: GRAPH
                      name: graphid
                      value:
                        name: 'Solr: JVM memory heap'
                        host: 'App Solr'
                -
                  type: GRAPH_CLASSIC
                  x: '16'
                  width: '8'
                  height: '6'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '0'
                    -
                      type: GRAPH
                      name: graphid
                      value:
                        name: 'Solr: JVM memory non-heap'
                        host: 'App Solr'
                -
                  type: GRAPH_CLASSIC
                  'y': '6'
                  width: '8'
                  height: '6'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '0'
                    -
                      type: GRAPH
                      name: graphid
                      value:
                        name: 'Solr: JVM threads'
                        host: 'App Solr'
                -
                  type: GRAPH_CLASSIC
                  x: '8'
                  'y': '6'
                  width: '8'
                  height: '6'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '0'
                    -
                      type: GRAPH
                      name: graphid
                      value:
                        name: 'Solr: JVM file descriptors'
                        host: 'App Solr'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '12'
                  width: '8'
                  height: '6'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Solr: Core {#CORENAME} document cache'
                        host: 'App Solr'
                -
                  type: GRAPH_PROTOTYPE
                  x: '8'
                  'y': '12'
                  width: '8'
                  height: '6'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Solr: Core {#CORENAME} filter cache'
                        host: 'App Solr'
                -
                  type: GRAPH_PROTOTYPE
                  x: '16'
                  'y': '12'
                  width: '8'
                  height: '6'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Solr: Core {#CORENAME} index size'
                        host: 'App Solr'
  graphs:
    -
      uuid: 73f91469cbd140b6b8a0d870203e5939
      name: 'Solr: JVM file descriptors'
      ymax_type_1: ITEM
      ymax_item_1:
        host: 'App Solr'
        key: solr.jvm.os.maxFileDescriptorCount
      graph_items:
        -
          sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'App Solr'
            key: solr.jvm.os.maxFileDescriptorCount
        -
          sortorder: '2'
          drawtype: GRADIENT_LINE
          color: F63100
          item:
            host: 'App Solr'
            key: solr.jvm.os.openFileDescriptorCount
    -
      uuid: bd0b9aaa0e6f4e689c740da4c8b4212d
      name: 'Solr: JVM memory heap'
      ymax_type_1: ITEM
      ymax_item_1:
        host: 'App Solr'
        key: solr.jvm.memory.heap.max
      graph_items:
        -
          sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'App Solr'
            key: solr.jvm.memory.heap.max
        -
          sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 2774A4
          item:
            host: 'App Solr'
            key: solr.jvm.memory.heap.committed
        -
          sortorder: '3'
          drawtype: GRADIENT_LINE
          color: F63100
          item:
            host: 'App Solr'
            key: solr.jvm.memory.heap.used
    -
      uuid: f4beeb1240794b0f8b044a6118332a96
      name: 'Solr: JVM memory non-heap'
      ymax_type_1: ITEM
      ymax_item_1:
        host: 'App Solr'
        key: solr.jvm.memory.non-heap.max
      graph_items:
        -
          sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'App Solr'
            key: solr.jvm.memory.non-heap.max
        -
          sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 2774A4
          item:
            host: 'App Solr'
            key: solr.jvm.memory.non-heap.committed
        -
          sortorder: '3'
          drawtype: GRADIENT_LINE
          color: F63100
          item:
            host: 'App Solr'
            key: solr.jvm.memory.non-heap.used
    -
      uuid: bb998dd5e9a14313a22e1c32c000e31f
      name: 'Solr: JVM memory total'
      ymax_type_1: ITEM
      ymax_item_1:
        host: 'App Solr'
        key: solr.jvm.memory.total.max
      graph_items:
        -
          sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'App Solr'
            key: solr.jvm.memory.total.max
        -
          sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 2774A4
          item:
            host: 'App Solr'
            key: solr.jvm.memory.total.committed
        -
          sortorder: '3'
          drawtype: GRADIENT_LINE
          color: F63100
          item:
            host: 'App Solr'
            key: solr.jvm.memory.total.used
    -
      uuid: 6ecfdb4763124888993fe45de68a4a01
      name: 'Solr: JVM threads'
      type: STACKED
      ymax_type_1: ITEM
      ymax_item_1:
        host: 'App Solr'
        key: solr.jvm.threads.count
      graph_items:
        -
          sortorder: '1'
          color: F63100
          item:
            host: 'App Solr'
            key: solr.jvm.threads.blocked.count
        -
          sortorder: '2'
          color: 2774A4
          item:
            host: 'App Solr'
            key: solr.jvm.threads.daemon.count
        -
          sortorder: '3'
          color: F7941D
          item:
            host: 'App Solr'
            key: solr.jvm.threads.deadlock.count
        -
          sortorder: '4'
          color: 199C0D
          item:
            host: 'App Solr'
            key: solr.jvm.threads.runnable.count
        -
          sortorder: '5'
          color: 6C59DC
          item:
            host: 'App Solr'
            key: solr.jvm.threads.terminated.count
        -
          sortorder: '6'
          color: C7A72D
          item:
            host: 'App Solr'
            key: solr.jvm.threads.waiting.count
