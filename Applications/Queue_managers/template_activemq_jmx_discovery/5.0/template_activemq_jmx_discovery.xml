<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2021-11-21T21:31:44Z</date><groups><group><name>Templates</name></group></groups><templates><template><template>JMX ActiveMQ</template><name>JMX ActiveMQ</name><description>## Overview

Download and import the Zabbix server.



## Author

Armagan Yaman

</description><groups><group><name>Templates</name></group></groups><applications><application><name>Brokers</name></application><application><name>Destinations</name></application></applications><discovery_rules><discovery_rule><name>ActiveMQ brokers</name><type>JMX</type><key>jmx.discovery[beans,&quot;org.apache.activemq:type=Broker,brokerName=*&quot;]</key><delay>3600</delay><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><item_prototypes><item_prototype><name>MemoryLimit for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,MemoryLimit]</key><delay>3600</delay><units>byte</units><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><applications><application><name>Brokers</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype><item_prototype><name>MemoryPercentUsage for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,MemoryPercentUsage]</key><delay>60</delay><units>%</units><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><applications><application><name>Brokers</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint><trigger_prototypes><trigger_prototype><expression>{last(0)}&gt;{$AMQ_BROKER_MEM_USAGE_THRESHOLD}</expression><name>MemoryPercentUsage &gt;{$AMQ_BROKER_MEM_USAGE_THRESHOLD}% for broker {#JMXVALUE}</name><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>StoreLimit for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,StoreLimit]</key><delay>3600</delay><units>byte</units><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><applications><application><name>Brokers</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype><item_prototype><name>StorePercentUsage for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,StorePercentUsage]</key><delay>60</delay><units>%</units><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><applications><application><name>Brokers</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint><trigger_prototypes><trigger_prototype><expression>{last(0)}&gt;{$AMQ_BROKER_STORE_USAGE_THRESHOLD}</expression><name>StorePercentUsage &gt;{$AMQ_BROKER_STORE_USAGE_THRESHOLD}% for broker {#JMXVALUE}</name><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>TempLimit for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,TempLimit]</key><delay>3600</delay><units>byte</units><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><applications><application><name>Brokers</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype><item_prototype><name>TempPercentUsage for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,TempPercentUsage]</key><delay>60</delay><units>%</units><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><applications><application><name>Brokers</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint><trigger_prototypes><trigger_prototype><expression>{last(0)}&gt;{$AMQ_BROKER_TMP_USAGE_THRESHOLD}</expression><name>TempPercentUsage &gt;{$AMQ_BROKER_TMP_USAGE_THRESHOLD}% for broker {#JMXVALUE}</name><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>TotalConsumerCount for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,TotalConsumerCount]</key><delay>60</delay><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><applications><application><name>Brokers</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype><item_prototype><name>TotalDequeueCount per minute for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,TotalDequeueCount]</key><delay>30</delay><value_type>FLOAT</value_type><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><applications><application><name>Brokers</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>60</params></step></preprocessing><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype><item_prototype><name>TotalEnqueueCount per minute for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,TotalEnqueueCount]</key><delay>30</delay><value_type>FLOAT</value_type><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><applications><application><name>Brokers</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>60</params></step></preprocessing><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype><item_prototype><name>TotalMessageCount per minute for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,TotalMessageCount]</key><delay>30</delay><value_type>FLOAT</value_type><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><description>Number of unacknowledged messages on the broker per minute</description><applications><application><name>Brokers</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>60</params></step></preprocessing><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype></item_prototypes><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></discovery_rule><discovery_rule><name>ActiveMQ destinations</name><type>JMX</type><key>jmx.discovery[beans,&quot;org.apache.activemq:type=Destination,destinationName=*&quot;]</key><delay>3600</delay><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><item_prototypes><item_prototype><name>AverageEnqueueTime for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,AverageEnqueueTime]</key><delay>300</delay><value_type>FLOAT</value_type><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><description>Average time a message has been held this destination</description><applications><application><name>Destinations</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype><item_prototype><name>ConsumerCount for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,ConsumerCount]</key><delay>60</delay><history>30d</history><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><description>Number of consumers subscribed to this destination.</description><applications><application><name>Destinations</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint><trigger_prototypes><trigger_prototype><expression>{last(0)}&lt;{$AMQ_DESTINATION_CONSUMER_COUNT_THRESHOLD_MIN}</expression><name>Too few (&lt;{$AMQ_DESTINATION_CONSUMER_COUNT_THRESHOLD_MIN}) consumers for {#JMXVALUE}</name><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>DequeueCount per minute for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,DequeueCount]</key><delay>30</delay><history>30d</history><value_type>FLOAT</value_type><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><description>Number of messages per minute that have been acknowledged (and removed from) from the destination.</description><applications><application><name>Destinations</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>60</params></step></preprocessing><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype><item_prototype><name>EnqueueCount per minute for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,EnqueueCount]</key><delay>30</delay><history>30d</history><value_type>FLOAT</value_type><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><description>Number of messages per minute that have been sent to the destination.</description><applications><application><name>Destinations</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>60</params></step></preprocessing><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></item_prototype><item_prototype><name>ExpiredCount per minute for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,ExpiredCount]</key><delay>30</delay><history>30d</history><value_type>FLOAT</value_type><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><description>Number of messages per minute that have been expired.</description><applications><application><name>Destinations</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>60</params></step></preprocessing><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint><trigger_prototypes><trigger_prototype><expression>{last(0)}&gt;0</expression><name>Expired messages in {#JMXVALUE}!</name><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>ProducerCount for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,ProducerCount]</key><delay>60</delay><history>30d</history><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><description>Number of producers publishing to this destination</description><applications><application><name>Destinations</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint><trigger_prototypes><trigger_prototype><expression>{last(0)}&lt;{$AMQ_DESTINATION_PRODUCER_COUNT_THRESHOLD_MIN}</expression><name>Too few (&lt;{$AMQ_DESTINATION_PRODUCER_COUNT_THRESHOLD_MIN}) producers for {#JMXVALUE}</name><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>QueueSize for {#JMXVALUE}</name><type>JMX</type><key>jmx[&quot;{#JMXOBJ}&quot;,QueueSize]</key><delay>60</delay><history>30d</history><username>{$JMX_USERNAME}</username><password>{$JMX_PASSWORD}</password><description>Number of messages in the destination which are yet to be consumed.  Potentially dispatched but unacknowledged.</description><applications><application><name>Destinations</name></application></applications><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint><trigger_prototypes><trigger_prototype><expression>{last(0)}&gt;{$AMQ_DESTINATION_QUEUE_SIZE_THRESHOLD}</expression><name>QueueSize &gt;{$AMQ_DESTINATION_QUEUE_SIZE_THRESHOLD} for {#JMXVALUE}</name><priority>HIGH</priority><description>Queue {#JMXVALUE} size threshold exceeded!</description></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint></discovery_rule></discovery_rules><macros><macro><macro>{$AMQ_BROKER_MEM_USAGE_THRESHOLD}</macro><value>85</value></macro><macro><macro>{$AMQ_BROKER_STORE_USAGE_THRESHOLD}</macro><value>85</value></macro><macro><macro>{$AMQ_BROKER_TMP_USAGE_THRESHOLD}</macro><value>85</value></macro><macro><macro>{$AMQ_DESTINATION_CONSUMER_COUNT_THRESHOLD_MIN}</macro><value>0</value></macro><macro><macro>{$AMQ_DESTINATION_PRODUCER_COUNT_THRESHOLD_MIN}</macro><value>0</value></macro><macro><macro>{$AMQ_DESTINATION_QUEUE_SIZE_THRESHOLD}</macro><value>10</value></macro></macros></template></templates></zabbix_export>
