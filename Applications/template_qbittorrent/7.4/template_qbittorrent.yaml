zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: 15b420c7c194441b94a30c6a111dce65
      name: 'Templates Midgard'
  templates:
    - uuid: cef1821a25484a7c93c07d4431b4faed
      template: qBittorrent
      name: qBittorrent
      description: |
        ## Description
        
        Template de monitoramento da API do qBittorrent
        
        ## Overview
        
        Template for qBittorrent with full torrent monitoring.
        
        Do you need change macro "{$URLQBITTORRENT}", set de URL on your qBittorrent server with port (if exist).
        
        In the qBittorent do you need change in options>web interface to allow IP the zabbix server or proxy.
        
        ## Items:
        
        * Global Transfer Info
        * Connection Status
        * DHT Nodes
        * Download/Upload Speed
        * Download/Upload Data
        * Download/Upload Limits
        * Version
        * All Torrents Data (master for discovery and dependent items)
        
        ## Discovery Items (per torrent):
        
        * Torrent Name and Hash
        * State and Progress
        * Download/Upload Speed
        * Downloaded/Uploaded Data
        * Size and Amount Left
        * ETA and Ratio
        * Number of Seeds/Leechs
        * Priority and Category
        * Added/Completion timestamps
        * Tracker information
        * Seeding time
        
        ## Author
        
        Antony Peronio (Improved by Zabbix Expert)
      groups:
        - name: 'Templates Midgard'
      items:
        - uuid: 8b7e1ab7e10f4c5aa32f8784b81e6de0
          name: 'Connection Status'
          type: DEPENDENT
          key: qbittorrent.connection_status
          history: 90d
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.connection_status
          master_item:
            key: transferInfo
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
        - uuid: 2bcb7755c300447cb159e98bca02f1cc
          name: 'DHT Nodes'
          type: DEPENDENT
          key: qbittorrent.dht_nodes
          history: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.dht_nodes
          master_item:
            key: transferInfo
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
        - uuid: bd73d6247abd4d5bad98770b611e1c30
          name: 'Download Speed'
          type: DEPENDENT
          key: qbittorrent.download
          history: 90d
          units: Bps
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.dl_info_speed
          master_item:
            key: transferInfo
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
        - uuid: 469080295901401f88832b291b679ee0
          name: 'Download Data'
          type: DEPENDENT
          key: qbittorrent.dwldata
          history: 90d
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.dl_info_data
          master_item:
            key: transferInfo
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
        - uuid: 5790dc149b25437ab3675e79f2d79aed
          name: 'Download Limit'
          type: DEPENDENT
          key: qbittorrent.dwllimit
          history: 90d
          units: Bps
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.dl_rate_limit
          master_item:
            key: transferInfo
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
        - uuid: c62a76ee2156413fa75d2225297b40cc
          name: 'Upload Data'
          type: DEPENDENT
          key: qbittorrent.upldata
          history: 90d
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.up_info_data
          master_item:
            key: transferInfo
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
        - uuid: 498a51f51fad47b9a75146054f191294
          name: 'Upload Limit'
          type: DEPENDENT
          key: qbittorrent.upllimit
          history: 90d
          units: Bps
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.up_rate_limit
          master_item:
            key: transferInfo
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
        - uuid: d506e425f29c41e6b92477dad0ea84dc
          name: 'Upload Speed'
          type: DEPENDENT
          key: qbittorrent.upload
          history: 90d
          units: Bps
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.up_info_speed
          master_item:
            key: transferInfo
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
        - uuid: 8e2dcaeb623f4afe9d86354dd0bc0e2c
          name: Version
          type: HTTP_AGENT
          key: qbittorrent.version
          delay: 24h
          history: 90d
          value_type: TEXT
          url: '{$URLQBITTORRENT}/api/v2/app/version'
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
        - uuid: f2e1d5c08a3b4f6e9c7a1b2d3e4f5a6b
          name: 'qBittorrent all torrents data'
          type: HTTP_AGENT
          key: torrents.all
          delay: 5m
          history: 90d
          value_type: TEXT
          url: '{$URLQBITTORRENT}/api/v2/torrents/info'
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Torrents
        - uuid: 1f46fabbdbdd4dd682e649a2dcc05ddd
          name: 'qBittorrent transferInfo'
          type: HTTP_AGENT
          key: transferInfo
          history: 90d
          value_type: TEXT
          url: '{$URLQBITTORRENT}/api/v2/transfer/info'
          tags:
            - tag: Application
              value: qBittorrent
            - tag: Category
              value: Global
      discovery_rules:
        - uuid: 39e1f98665cc492faf599fff59b2fda7
          name: 'Discovery Torrents'
          type: DEPENDENT
          key: torrents.discovery
          lifetime: 30d
          item_prototypes:
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b3c7
              name: 'Torrent {#NAME}: Added On'
              type: DEPENDENT
              key: 'torrent.added_on[{#HASH}]'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].added_on.first()'
                - type: MULTIPLIER
                  parameters:
                    - '1'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b2c7
              name: 'Torrent {#NAME}: Amount Left'
              type: DEPENDENT
              key: 'torrent.amount_left[{#HASH}]'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].amount_left.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b5c2
              name: 'Torrent {#NAME}: Auto TMM'
              type: DEPENDENT
              key: 'torrent.auto_tmm[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].auto_tmm.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b5c8
              name: 'Torrent {#NAME}: Availability'
              type: DEPENDENT
              key: 'torrent.availability[{#HASH}]'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].availability.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b4c3
              name: 'Torrent {#NAME}: Category'
              type: DEPENDENT
              key: 'torrent.category[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].category.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b3c8
              name: 'Torrent {#NAME}: Completion On'
              type: DEPENDENT
              key: 'torrent.completion_on[{#HASH}]'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].completion_on.first()'
                - type: MULTIPLIER
                  parameters:
                    - '1'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b5c4
              name: 'Torrent {#NAME}: Content Path'
              type: DEPENDENT
              key: 'torrent.content_path[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].content_path.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b3c1
              name: 'Torrent {#NAME}: Download Speed'
              type: DEPENDENT
              key: 'torrent.dlspeed[{#HASH}]'
              units: Bps
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].dlspeed.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b4c7
              name: 'Torrent {#NAME}: Download Limit'
              type: DEPENDENT
              key: 'torrent.dl_limit[{#HASH}]'
              units: Bps
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].dl_limit.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b2c8
              name: 'Torrent {#NAME}: Downloaded'
              type: DEPENDENT
              key: 'torrent.downloaded[{#HASH}]'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].downloaded.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b4c9
              name: 'Torrent {#NAME}: Downloaded Session'
              type: DEPENDENT
              key: 'torrent.downloaded_session[{#HASH}]'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].downloaded_session.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b3c5
              name: 'Torrent {#NAME}: ETA'
              type: DEPENDENT
              key: 'torrent.eta[{#HASH}]'
              units: s
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].eta.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b2c3
              name: 'Torrent {#NAME}: Name'
              type: DEPENDENT
              key: 'torrent.info.name[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].name.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b4c2
              name: 'Torrent {#NAME}: Last Activity'
              type: DEPENDENT
              key: 'torrent.last_activity[{#HASH}]'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].last_activity.first()'
                - type: MULTIPLIER
                  parameters:
                    - '1'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b5c6
              name: 'Torrent {#NAME}: Magnet URI'
              type: DEPENDENT
              key: 'torrent.magnet_uri[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].magnet_uri.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b3c4
              name: 'Torrent {#NAME}: Leechs'
              type: DEPENDENT
              key: 'torrent.num_leechs[{#HASH}]'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].num_leechs.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b3c3
              name: 'Torrent {#NAME}: Seeds'
              type: DEPENDENT
              key: 'torrent.num_seeds[{#HASH}]'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].num_seeds.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b5c9
              name: 'Torrent {#NAME}: Popularity'
              type: DEPENDENT
              key: 'torrent.popularity[{#HASH}]'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].popularity.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b4c6
              name: 'Torrent {#NAME}: Priority'
              type: DEPENDENT
              key: 'torrent.priority[{#HASH}]'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].priority.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b2c5
              name: 'Torrent {#NAME}: Progress'
              type: DEPENDENT
              key: 'torrent.progress[{#HASH}]'
              units: '%'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].progress.first()'
                - type: MULTIPLIER
                  parameters:
                    - '100'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b3c6
              name: 'Torrent {#NAME}: Ratio'
              type: DEPENDENT
              key: 'torrent.ratio[{#HASH}]'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].ratio.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b5c7
              name: 'Torrent {#NAME}: Root Path'
              type: DEPENDENT
              key: 'torrent.root_path[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].root_path.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b5c3
              name: 'Torrent {#NAME}: Save Path'
              type: DEPENDENT
              key: 'torrent.save_path[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].save_path.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b4c1
              name: 'Torrent {#NAME}: Seeding Time'
              type: DEPENDENT
              key: 'torrent.seeding_time[{#HASH}]'
              units: s
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].seeding_time.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b2c6
              name: 'Torrent {#NAME}: Size'
              type: DEPENDENT
              key: 'torrent.size[{#HASH}]'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].size.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b2c4
              name: 'Torrent {#NAME}: State'
              type: DEPENDENT
              key: 'torrent.state[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].state.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: c6a82560eac24217bdca8bea0db9ad9c
                  expression: 'last(/qBittorrent/torrent.state[{#HASH}])="error" or last(/qBittorrent/torrent.state[{#HASH}])="missingFiles" or last(/qBittorrent/torrent.state[{#HASH}])="unknown"'
                  name: 'Torrent {#NAME}: Error state'
                  priority: HIGH
                  tags:
                    - tag: Application
                      value: qBittorrent
                    - tag: Torrent
                      value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b4c5
              name: 'Torrent {#NAME}: Tags'
              type: DEPENDENT
              key: 'torrent.tags[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].tags.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b3c9
              name: 'Torrent {#NAME}: Time Active'
              type: DEPENDENT
              key: 'torrent.time_active[{#HASH}]'
              units: s
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].time_active.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b5c5
              name: 'Torrent {#NAME}: Trackers Count'
              type: DEPENDENT
              key: 'torrent.trackers_count[{#HASH}]'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].trackers_count.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b4c4
              name: 'Torrent {#NAME}: Tracker'
              type: DEPENDENT
              key: 'torrent.tracker[{#HASH}]'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].tracker.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b2c9
              name: 'Torrent {#NAME}: Uploaded'
              type: DEPENDENT
              key: 'torrent.uploaded[{#HASH}]'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].uploaded.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b5c1
              name: 'Torrent {#NAME}: Uploaded Session'
              type: DEPENDENT
              key: 'torrent.uploaded_session[{#HASH}]'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].uploaded_session.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b3c2
              name: 'Torrent {#NAME}: Upload Speed'
              type: DEPENDENT
              key: 'torrent.upspeed[{#HASH}]'
              units: Bps
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].upspeed.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: 78a9b4c3d2e144a5b6c7d8e9f0a1b4c8
              name: 'Torrent {#NAME}: Upload Limit'
              type: DEPENDENT
              key: 'torrent.up_limit[{#HASH}]'
              units: Bps
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.hash=="{#HASH}")].up_limit.first()'
              master_item:
                key: torrents.all
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Category
                  value: Torrents
                - tag: Torrent
                  value: '{#NAME}'
          trigger_prototypes:
            - uuid: f4981c6b146344d290bfbb334f4c7c22
              expression: 'last(/qBittorrent/torrent.progress[{#HASH}])=100 and last(/qBittorrent/torrent.ratio[{#HASH}])<1'
              name: 'Torrent {#NAME}: Low ratio'
              priority: WARNING
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Torrent
                  value: '{#NAME}'
            - uuid: ddb192daabc94d11bdee4b17fc104b93
              expression: 'last(/qBittorrent/torrent.progress[{#HASH}])<100 and last(/qBittorrent/torrent.dlspeed[{#HASH}])=0 and not (last(/qBittorrent/torrent.state[{#HASH}])="pausedUP" or last(/qBittorrent/torrent.state[{#HASH}])="pausedDL" or last(/qBittorrent/torrent.state[{#HASH}])="queuedDL" or last(/qBittorrent/torrent.state[{#HASH}])="checkingDL")'
              name: 'Torrent {#NAME}: Stalled download'
              priority: HIGH
              tags:
                - tag: Application
                  value: qBittorrent
                - tag: Torrent
                  value: '{#NAME}'
          master_item:
            key: torrents.all
          lld_macro_paths:
            - lld_macro: '{#HASH}'
              path: $.hash
            - lld_macro: '{#NAME}'
              path: $.name
      macros:
        - macro: '{$URLQBITTORRENT}'
