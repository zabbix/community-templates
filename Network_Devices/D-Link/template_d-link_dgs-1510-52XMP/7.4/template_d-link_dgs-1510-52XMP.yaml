zabbix_export:
  version: '7.4'

  template_groups:
    - uuid: 8f1c7b6e2c9e4b5e9a411b5d9c3a8e12
      name: 'Templates/Network devices'

  templates:
    - uuid: 2a9c4f6e8b3f4e6abc717e2c5d4f9a10
      template: 'Template Net D-Link DGS-1510 SNMP'
      name: 'Template Net D-Link DGS-1510 SNMP'
      description: >
        D-Link DGS-1510 series (tested on DGS-1510-52XMP Build 1.81.004).
        SNMPv2c monitoring: availability, identification, interface discovery,
        traffic and errors. CPU/RAM intentionally excluded.

      groups:
        - name: 'Templates/Network devices'

      macros:
        - macro: '{$SNMP_COMMUNITY}'
          type: TEXT
          value: 'public'
          description: 'SNMP v2c community'

      items:
        - uuid: 3c9b1f746a2d4f1c8b719f5a2d4e8c01
          name: 'SNMP: sysUpTime'
          type: SNMP_AGENT
          snmp_oid: '1.3.6.1.2.1.1.3.0'
          key: 'snmp.sysUpTime'
          delay: 1m
          value_type: FLOAT
          units: uptime
          history: 7d
          trends: 365d

        - uuid: 4d7a2c1e9b844a2f8e5c3f6b1d9a2e11
          name: 'SNMP: sysName'
          type: SNMP_AGENT
          snmp_oid: '1.3.6.1.2.1.1.5.0'
          key: 'snmp.sysName'
          delay: 5m
          value_type: TEXT
          history: 30d
          trends: 0

        - uuid: 5e8b4a2d7c6f4f919a3e1d2b6c5f7e21
          name: 'SNMP: sysDescr'
          type: SNMP_AGENT
          snmp_oid: '1.3.6.1.2.1.1.1.0'
          key: 'snmp.sysDescr'
          delay: 1h
          value_type: TEXT
          history: 30d
          trends: 0

      discovery_rules:
        - uuid: 6f1a9c3d2e4b4c7f8a1e5d9b3f2c6a31
          name: 'Network interfaces discovery'
          type: SNMP_AGENT
          key: 'net.if.discovery'
          delay: 10m
          snmp_oid: >
            discovery[{#IFINDEX},1.3.6.1.2.1.2.2.1.1,
            {#IFDESCR},1.3.6.1.2.1.2.2.1.2,
            {#IFNAME},1.3.6.1.2.1.31.1.1.1.1]

          filter:
            evaltype: AND
            conditions:
              - formulaid: A
                macro: '{#IFDESCR}'
                value: '.*(L2VLAN|rif|CPU).*'
                operator: NOT_MATCHES_REGEX

          item_prototypes:
            - uuid: 7a2c5d4e1f9b4e8c9a3d6b2f1c5e9d41
              name: 'Interface {#IFNAME}: Operational status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.8.{#IFINDEX}'
              key: 'if.oper.status[{#IFINDEX}]'
              delay: 1m
              value_type: UNSIGNED
              history: 30d
              trends: 365d

            - uuid: 8b3f6a5d9c2e4f718d1a5e3c9b2f6a51
              name: 'Interface {#IFNAME}: Inbound traffic'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.6.{#IFINDEX}'
              key: 'if.in.bps[{#IFINDEX}]'
              delay: 1m
              value_type: FLOAT
              units: bps
              history: 30d
              trends: 365d
              preprocessing:
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters: ['8']

            - uuid: 9c5e1d7a4b2f4a6e8c3f2d9b5a6e1c61
              name: 'Interface {#IFNAME}: Outbound traffic'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.10.{#IFINDEX}'
              key: 'if.out.bps[{#IFINDEX}]'
              delay: 1m
              value_type: FLOAT
              units: bps
              history: 30d
              trends: 365d
              preprocessing:
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters: ['8']
