zabbix_export:
  version: '7.0'
  templates:
    - uuid: 381631c83e4e4d8e9313fe7acda6e8d9
      template: Template_SNMP_HP_1910
      name: Template SNMP HP Switch (1910 Series)
      groups:
        - name: Templates
      description: SNMP monitoring for HP 1910/ProCurve-like switches (interfaces LLD, traffic, errors, link status).
      items:
        - uuid: 46d3cfd3d94841bf9884f56a0398a91e
          name: System description
          type: SNMP_AGENT
          key: hp.sysDescr
          value_type: TEXT
          snmp_oid: 1.3.6.1.2.1.1.1.0
          delay: 6h

        - uuid: e29226457e2e4e2a9e2ae0e0ea4d018e
          name: System name
          type: SNMP_AGENT
          key: hp.sysName
          value_type: TEXT
          snmp_oid: 1.3.6.1.2.1.1.5.0
          delay: 6h

        - uuid: ad43e660b0c449c0b65021bab9c52fff
          name: System uptime
          type: SNMP_AGENT
          key: hp.sysUpTime
          value_type: UNSIGNED
          units: uptime
          snmp_oid: 1.3.6.1.2.1.1.3.0
          delay: 5m

      discovery_rules:
        - uuid: 4c4f2a1ea61c4692b9783a2482c2d492
          name: Interface discovery
          type: SNMP_AGENT
          key: hp.if.discovery
          delay: 1h
          snmp_oid: discovery[{#IFINDEX},1.3.6.1.2.1.2.2.1.1,{#IFNAME},1.3.6.1.2.1.31.1.1.1.1]
          item_prototypes:
            - uuid: b295b7e477a8433eba26ef1bca5de169
              name: Interface {#IFNAME} admin status
              type: SNMP_AGENT
              key: hp.if.admin.status[{#IFINDEX}]
              value_type: UNSIGNED
              snmp_oid: 1.3.6.1.2.1.2.2.1.7.{#IFINDEX}
              delay: 2m

            - uuid: 92f9d3607765498e996300072c63a812
              name: Interface {#IFNAME} oper status
              type: SNMP_AGENT
              key: hp.if.oper.status[{#IFINDEX}]
              value_type: UNSIGNED
              snmp_oid: 1.3.6.1.2.1.2.2.1.8.{#IFINDEX}
              delay: 1m

            - uuid: 343a36a8f741478fb546020fdb582b3d
              name: Interface {#IFNAME} inbound traffic bps
              type: SNMP_AGENT
              key: hp.net.if.in.bps[{#IFINDEX}]
              value_type: UNSIGNED
              units: bps
              snmp_oid: 1.3.6.1.2.1.31.1.1.1.6.{#IFINDEX}
              delay: 1m
              preprocessing:
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters:
                    - '8'

            - uuid: b7ceabc2ddc44dfcb8b21f39be3bc9ac
              name: Interface {#IFNAME} outbound traffic bps
              type: SNMP_AGENT
              key: hp.net.if.out.bps[{#IFINDEX}]
              value_type: UNSIGNED
              units: bps
              snmp_oid: 1.3.6.1.2.1.31.1.1.1.10.{#IFINDEX}
              delay: 1m
              preprocessing:
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters:
                    - '8'

            - uuid: c25174c763ae45a3846a44e0f8077144
              name: Interface {#IFNAME} inbound errors
              type: SNMP_AGENT
              key: hp.net.if.in.errors[{#IFINDEX}]
              value_type: UNSIGNED
              snmp_oid: 1.3.6.1.2.1.2.2.1.14.{#IFINDEX}
              delay: 2m

            - uuid: 5048174915e745edb3afb191df9f3212
              name: Interface {#IFNAME} outbound errors
              type: SNMP_AGENT
              key: hp.net.if.out.errors[{#IFINDEX}]
              value_type: UNSIGNED
              snmp_oid: 1.3.6.1.2.1.2.2.1.20.{#IFINDEX}
              delay: 2m

          trigger_prototypes:
            - uuid: 50e99d4bd6fd4b1cad793d2aa2b33383
              name: Link down on {#IFNAME}
              expression: 'last(/Template_SNMP_HP_1910/hp.if.oper.status[{#IFINDEX}])=2 and last(/Template_SNMP_HP_1910/hp.if.admin.status[{#IFINDEX}])=1'
              priority: HIGH

            - uuid: d2c281ce307145b489ff025b4380f574
              name: Errors detected on {#IFNAME}
              expression: '(min(/Template_SNMP_HP_1910/hp.net.if.in.errors[{#IFINDEX}],5m)>0) or (min(/Template_SNMP_HP_1910/hp.net.if.out.errors[{#IFINDEX}],5m)>0)'
              priority: WARNING

          graph_prototypes:
            - uuid: 36933270c7b84a85adef1d11b4c3fc61
              name: Traffic on {#IFNAME}
              graph_items:
                - sortorder: '0'
                  color: 1A7CFF
                  item:
                    host: Template_SNMP_HP_1910
                    key: hp.net.if.in.bps[{#IFINDEX}]
                - sortorder: '1'
                  color: FF4D4D
                  item:
                    host: Template_SNMP_HP_1910
                    key: hp.net.if.out.bps[{#IFINDEX}]
