<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2021-11-21T21:25:29Z</date><groups><group><name>Cisco</name></group><group><name>Templates</name></group></groups><templates><template><template>Cisco_Sensors</template><name>Cisco_Sensors</name><description>## Overview

This template gets informations from optical sensors in Cisco switches/routes. It will get optical transmit and receive power from each optical interface connected in.


It uses mibs CISCO-ENTITY-SENSOR-MIB and CISCO-ENVMON-MIB.


Do not forget to add this lines to snmp.conf!


mibs +CISCO-ENTITY-SENSOR-MIB  
mibs +CISCO-ENVMON-MIB  
  
After discovery, template finds all connected GBICs and get informations about thresholds and signal levels.


There are triggers included which will be PROBLEM if signal level is out of range or if signal level changes in time.


Just apply template to your box and set macro {$SNMP\_COMMUNITY} to fit your needs.


 


 



## Author

Lukas Macura

</description><groups><group><name>Cisco</name></group><group><name>Templates</name></group></groups><applications><application><name>Sensors</name></application></applications><discovery_rules><discovery_rule><name>Sensors discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#SNMPVALUE},ENTITY-MIB::entPhysicalDescr]</snmp_oid><key>snmp.discoverysensors</key><delay>180</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#SNMPVALUE}</macro><value>Receive Power|Transmit Power</value><formulaid>A</formulaid></condition></conditions></filter><item_prototypes><item_prototype><name>Sensor threshold eval 1: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdEvaluation.{#SNMPINDEX}.1</snmp_oid><key>sensorte1[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdEval</name></valuemap></item_prototype><item_prototype><name>Sensor threshold eval 2: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdEvaluation.{#SNMPINDEX}.2</snmp_oid><key>sensorte2[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdEval</name></valuemap></item_prototype><item_prototype><name>Sensor threshold eval 3: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdEvaluation.{#SNMPINDEX}.3</snmp_oid><key>sensorte3[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdEval</name></valuemap></item_prototype><item_prototype><name>Sensor threshold eval 4: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdEvaluation.{#SNMPINDEX}.4</snmp_oid><key>sensorte4[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdEval</name></valuemap></item_prototype><item_prototype><name>Sensor threshold relation 1: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdRelation.{#SNMPINDEX}.1</snmp_oid><key>sensortr1[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdRel</name></valuemap></item_prototype><item_prototype><name>Sensor threshold relation 2: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdRelation.{#SNMPINDEX}.2</snmp_oid><key>sensortr2[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdRel</name></valuemap></item_prototype><item_prototype><name>Sensor threshold relation 3: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdRelation.{#SNMPINDEX}.3</snmp_oid><key>sensortr3[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdRel</name></valuemap></item_prototype><item_prototype><name>Sensor threshold relation 4: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdRelation.{#SNMPINDEX}.4</snmp_oid><key>sensortr4[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdRel</name></valuemap></item_prototype><item_prototype><name>Sensor threshold severity 1: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdSeverity.{#SNMPINDEX}.1</snmp_oid><key>sensorts1[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdSeverity</name></valuemap></item_prototype><item_prototype><name>Sensor threshold severity 2: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdSeverity.{#SNMPINDEX}.2</snmp_oid><key>sensorts2[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdSeverity</name></valuemap></item_prototype><item_prototype><name>Sensor threshold severity 3: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdSeverity.{#SNMPINDEX}.3</snmp_oid><key>sensorts3[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdSeverity</name></valuemap></item_prototype><item_prototype><name>Sensor threshold severity 4: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdSeverity.{#SNMPINDEX}.4</snmp_oid><key>sensorts4[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><applications><application><name>Sensors</name></application></applications><valuemap><name>SensorTresholdSeverity</name></valuemap></item_prototype><item_prototype><name>Sensor threshold value 1: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdValue.{#SNMPINDEX}.1</snmp_oid><key>sensortv1[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><value_type>FLOAT</value_type><applications><application><name>Sensors</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing></item_prototype><item_prototype><name>Sensor threshold value 2: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdValue.{#SNMPINDEX}.2</snmp_oid><key>sensortv2[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><value_type>FLOAT</value_type><applications><application><name>Sensors</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing></item_prototype><item_prototype><name>Sensor threshold value 3: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdValue.{#SNMPINDEX}.3</snmp_oid><key>sensortv3[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><value_type>FLOAT</value_type><applications><application><name>Sensors</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing></item_prototype><item_prototype><name>Sensor threshold value 4: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorThresholdValue.{#SNMPINDEX}.4</snmp_oid><key>sensortv4[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><value_type>FLOAT</value_type><applications><application><name>Sensors</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing></item_prototype><item_prototype><name>Sensor value: {#SNMPVALUE}</name><type>SNMP_AGENT</type><snmp_oid>CISCO-ENTITY-SENSOR-MIB::entSensorValue.{#SNMPINDEX}</snmp_oid><key>sensorvalue[{#SNMPINDEX}]</key><delay>300</delay><history>7d</history><trends>30d</trends><value_type>FLOAT</value_type><applications><application><name>Sensors</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing><trigger_prototypes><trigger_prototype><expression>{delta(#1)}&gt;0.1</expression><name>Sensor {#SNMPVALUE} changed more than 0.1dB!</name><priority>WARNING</priority></trigger_prototype><trigger_prototype><expression>{delta(#1)}&gt;=1</expression><name>Sensor {#SNMPVALUE} changed more than 1dB!</name><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>{Cisco_Sensors:sensorte1[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts1[{#SNMPINDEX}].last()}=20</expression><name>Sensor {#SNMPVALUE} over threshold (alert)</name><priority>HIGH</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte2[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts2[{#SNMPINDEX}].last()}=20</expression><name>Sensor {#SNMPVALUE} over threshold (alert)</name><priority>HIGH</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte3[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts3[{#SNMPINDEX}].last()}=20</expression><name>Sensor {#SNMPVALUE} over threshold (alert)</name><priority>HIGH</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte4[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts4[{#SNMPINDEX}].last()}=20</expression><name>Sensor {#SNMPVALUE} over threshold (alert)</name><priority>HIGH</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte1[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts1[{#SNMPINDEX}].last()}=30</expression><name>Sensor {#SNMPVALUE} over threshold (critical)</name><priority>DISASTER</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte2[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts2[{#SNMPINDEX}].last()}=30</expression><name>Sensor {#SNMPVALUE} over threshold (critical)</name><priority>DISASTER</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte3[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts3[{#SNMPINDEX}].last()}=30</expression><name>Sensor {#SNMPVALUE} over threshold (critical)</name><priority>DISASTER</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte4[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts4[{#SNMPINDEX}].last()}=30</expression><name>Sensor {#SNMPVALUE} over threshold (critical)</name><priority>DISASTER</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte1[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts1[{#SNMPINDEX}].last()}=10</expression><name>Sensor {#SNMPVALUE} over threshold (warning)</name><priority>AVERAGE</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte2[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts2[{#SNMPINDEX}].last()}=10</expression><name>Sensor {#SNMPVALUE} over threshold (warning)</name><priority>AVERAGE</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte3[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts3[{#SNMPINDEX}].last()}=10</expression><name>Sensor {#SNMPVALUE} over threshold (warning)</name><priority>AVERAGE</priority></trigger_prototype><trigger_prototype><expression>{Cisco_Sensors:sensorte4[{#SNMPINDEX}].last()}=1&#13;
and &#13;
{Cisco_Sensors:sensorts4[{#SNMPINDEX}].last()}=10</expression><name>Sensor {#SNMPVALUE} over threshold (warning)</name><priority>AVERAGE</priority></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><name>Sensor {#SNMPVALUE}</name><graph_items><graph_item><color>1A7C11</color><item><host>Cisco_Sensors</host><key>sensortv1[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>F63100</color><item><host>Cisco_Sensors</host><key>sensortv2[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>2774A4</color><item><host>Cisco_Sensors</host><key>sensortv3[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>Cisco_Sensors</host><key>sensortv4[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>4</sortorder><drawtype>BOLD_LINE</drawtype><color>00CC00</color><item><host>Cisco_Sensors</host><key>sensorvalue[{#SNMPINDEX}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$SNMP_COMMUNITY}</macro><value>public</value></macro></macros></template></templates><value_maps><value_map><name>SensorTresholdEval</name><mappings><mapping><value>1</value><newvalue>true</newvalue></mapping><mapping><value>2</value><newvalue>false</newvalue></mapping></mappings></value_map><value_map><name>SensorTresholdRel</name><mappings><mapping><value>1</value><newvalue>lessThan</newvalue></mapping><mapping><value>2</value><newvalue>lessOrEqual</newvalue></mapping><mapping><value>3</value><newvalue>greaterThan</newvalue></mapping><mapping><value>4</value><newvalue>greaterOrEqual</newvalue></mapping><mapping><value>5</value><newvalue>equalTo</newvalue></mapping><mapping><value>6</value><newvalue>notEqualTo</newvalue></mapping></mappings></value_map><value_map><name>SensorTresholdSeverity</name><mappings><mapping><value>1</value><newvalue>other</newvalue></mapping><mapping><value>10</value><newvalue>minor</newvalue></mapping><mapping><value>20</value><newvalue>major</newvalue></mapping><mapping><value>30</value><newvalue>critical</newvalue></mapping></mappings></value_map></value_maps></zabbix_export>
