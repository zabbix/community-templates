<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2021-11-21T21:30:06Z</date><groups><group><name>Templates</name></group></groups><templates><template><template>Juniper Total</template><name>Juniper Total</name><description>## Overview

This template is a smattering of a few templates combined with some custom discovery rules.


It has been tested to work with most Juniper switches and firewalls. It uses the standard SNMP root for all discovery, so it works with most switch/router devices. If you have any issues with it let me know. I exported this from a live system, so the read the dependencies below.


**What it does:**


* BGP Discovery
+ Peer State

* IPSEC Discovery
+ Peer State

* Interface Discovery
+ Traffic in/out
+ Errors in/out
+ Drops in/out

* OSPF Discovery
+ Neighbor State

* IKE Discovery
+ Peer State


**Non Discovery items:**


* Temperature
* CPU
* Memory
* Make/Model
* ICMP


The template creates quite a few graph prototypes and adds them to a screen as well.


**Dependencies:**


The template had value maps, interface filters and groups associated with it when I cloned it, but I removed them so there shouldn't be any issues with it. If you find an issue importing let me know. I was successful importing default template to a new system.


**Other Instructions:**


Be sure to fill in the $SNMP\_COMMUNITY macro with your SNMP community string.


Also IKE discovery does not seem to work on JunOS pre 12.3. Everything else seems to work fine.


**Updates:**


1) Updated as I left my community string in the macros section :(


2) The Parent OID for interface discovery is for the 32Bit counters. This will not work for 64Bit devices. I'll update this week



</description><groups><group><name>Templates</name></group></groups><applications><application><name>BGP</name></application><application><name>CPU</name></application><application><name>General</name></application><application><name>ICMP</name></application><application><name>IKE</name></application><application><name>IPSEC</name></application><application><name>Memory</name></application><application><name>OPSF</name></application><application><name>Temperature</name></application></applications><items><item><name>Simple ICMP Time</name><type>SIMPLE</type><key>icmppingsec[,,,,,]</key><delay>30</delay><value_type>FLOAT</value_type><units>s</units><username>legal-discovery-user</username><password>AHJppDeQCJgAyyEH_OTTiOAyL</password><applications><application><name>ICMP</name></application></applications></item><item><name>Simple ICMP Up Check</name><type>SIMPLE</type><key>icmpping[,,,,]</key><delay>30</delay><history>7d</history><username>legal-discovery-user</username><password>AHJppDeQCJgAyyEH_OTTiOAyL</password><applications><application><name>ICMP</name></application></applications><triggers><trigger><expression>{last()}=0</expression><name>{HOST.NAME} ICMP Response</name><priority>WARNING</priority></trigger></triggers></item><item><name>Juniper Make/Model</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.1.0</snmp_oid><key>juniper.make.model</key><delay>3600</delay><history>5d</history><trends>0</trends><value_type>TEXT</value_type><description>OID to query Unit Make and Model</description><applications><application><name>General</name></application></applications></item><item><name>JunOS CPU % in use</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.4.1.2636.3.1.13.1.8.9.1.0.0</snmp_oid><key>Junos.CPU</key><delay>30</delay><units>%</units><applications><application><name>CPU</name></application></applications></item><item><name>JunOS Memory % in use</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.4.1.2636.3.1.13.1.11.9.1.0.0</snmp_oid><key>Junos.Mem</key><delay>30</delay><units>%</units><applications><application><name>Memory</name></application></applications></item><item><name>JunOS temperature</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.4.1.2636.3.1.13.1.7.9.1.0.0</snmp_oid><key>Junos.Temp</key><delay>30</delay><units>C</units><applications><application><name>Temperature</name></application></applications></item></items><discovery_rules><discovery_rule><name>Juniper BGP Peer Enumeration</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#SNMPVALUE},1.3.6.1.2.1.15.3.1.2]</snmp_oid><key>discovery.bgp</key><delay>3600</delay><lifetime>1d</lifetime><item_prototypes><item_prototype><name>bgpPeerState {#SNMPINDEX}</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.15.3.1.2.{#SNMPINDEX}</snmp_oid><key>.1.3.6.1.2.1.15.3.1.2.[{#SNMPINDEX}]</key><delay>60</delay><value_type>FLOAT</value_type><applications><application><name>BGP</name></application></applications></item_prototype></item_prototypes><graph_prototypes><graph_prototype><name>BGP PEER STATE {#SNMPINDEX}</name><graph_items><graph_item><color>1A7C11</color><item><host>Juniper Total</host><key>.1.3.6.1.2.1.15.3.1.2.[{#SNMPINDEX}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule><discovery_rule><name>Juniper Interface enumeration</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#SNMPVALUE},1.3.6.1.2.1.2.2.1.2]</snmp_oid><key>discovery.ifDescr</key><delay>3600</delay><lifetime>1d</lifetime><item_prototypes><item_prototype><name>{#SNMPVALUE} - Inbound traffic</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.2.2.1.10.{#SNMPINDEX}</snmp_oid><key>.1.3.6.1.2.1.2.2.1.10.[{#SNMPINDEX}]</key><delay>60</delay><history>7d</history><value_type>FLOAT</value_type><units>bps</units><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>8</params></step></preprocessing></item_prototype><item_prototype><name>{#SNMPVALUE} - Inbound discarded packets</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.2.2.1.13.{#SNMPINDEX}</snmp_oid><key>.1.3.6.1.2.1.2.2.1.13.[{#SNMPINDEX}]</key><delay>60</delay><history>7d</history><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item_prototype><item_prototype><name>{#SNMPVALUE} - Inbound error packets</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.2.2.1.14.{#SNMPINDEX}</snmp_oid><key>.1.3.6.1.2.1.2.2.1.14.[{#SNMPINDEX}]</key><delay>60</delay><history>7d</history><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item_prototype><item_prototype><name>{#SNMPVALUE} - Outbound traffic</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.2.2.1.16.{#SNMPINDEX}</snmp_oid><key>1.3.6.1.2.1.2.2.1.16.[{#SNMPINDEX}]</key><delay>60</delay><history>7d</history><value_type>FLOAT</value_type><units>bps</units><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>8</params></step></preprocessing></item_prototype><item_prototype><name>{#SNMPVALUE} - Outbound discarded packets</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.2.2.1.19.{#SNMPINDEX}</snmp_oid><key>1.3.6.1.2.1.2.2.1.19.[{#SNMPINDEX}]</key><delay>60</delay><history>7d</history><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step><step><type>MULTIPLIER</type><params>1</params></step></preprocessing></item_prototype><item_prototype><name>{#SNMPVALUE} - Outbound error packets</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.2.2.1.20.{#SNMPINDEX}</snmp_oid><key>1.3.6.1.2.1.2.2.1.20.[{#SNMPINDEX}]</key><delay>60</delay><history>7d</history><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step><step><type>MULTIPLIER</type><params>1</params></step></preprocessing></item_prototype></item_prototypes><graph_prototypes><graph_prototype><name>Interface {#SNMPVALUE} Discards and Errors</name><graph_items><graph_item><color>1A7C11</color><item><host>Juniper Total</host><key>.1.3.6.1.2.1.2.2.1.13.[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>F63100</color><item><host>Juniper Total</host><key>1.3.6.1.2.1.2.2.1.19.[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>2774A4</color><item><host>Juniper Total</host><key>.1.3.6.1.2.1.2.2.1.14.[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>Juniper Total</host><key>1.3.6.1.2.1.2.2.1.20.[{#SNMPINDEX}]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><name>Interface {#SNMPVALUE} Traffic</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Juniper Total</host><key>.1.3.6.1.2.1.2.2.1.10.[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>F63100</color><item><host>Juniper Total</host><key>1.3.6.1.2.1.2.2.1.16.[{#SNMPINDEX}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule><discovery_rule><name>Juniper IKE Peer Enumeration</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#SNMPVALUE},1.3.6.1.4.1.2636.3.52.1.1.2.1.14.1.4]</snmp_oid><key>discovery.ike</key><delay>3600</delay><lifetime>1d</lifetime><item_prototypes><item_prototype><name>ikePeerState {#SNMPINDEX}</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.4.1.2636.3.52.1.1.2.1.6.1.4.{#SNMPINDEX}</snmp_oid><key>.1.3.6.1.4.1.2636.3.52.1.1.2.1.6.1.4.[{#SNMPINDEX}]</key><delay>30</delay><history>7d</history><value_type>FLOAT</value_type><applications><application><name>IKE</name></application></applications></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>Juniper IPSec Tunnel State Enumeration</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#SNMPVALUE},1.3.6.1.4.1.2636.3.39.1.5.1.2.1.1.4]</snmp_oid><key>discovery.IPSec</key><delay>3600</delay><lifetime>1d</lifetime><item_prototypes><item_prototype><name>IPSec Tunnel State {#SNMPINDEX}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.2636.3.39.1.5.1.2.1.1.4.{#SNMPINDEX}</snmp_oid><key>1.3.6.1.4.1.2636.3.39.1.5.1.2.1.1.4.[{#SNMPINDEX}]</key><delay>60</delay><value_type>FLOAT</value_type><applications><application><name>IPSEC</name></application></applications></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>Juniper OSPF Neighbor State Enumeration</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#SNMPVALUE},1.3.6.1.2.1.14.10.1.6]</snmp_oid><key>discovery.ospf.nbr</key><delay>3600</delay><lifetime>1d</lifetime><item_prototypes><item_prototype><name>ospfNbrState {#SNMPINDEX}</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.14.10.1.6.{#SNMPINDEX}</snmp_oid><key>.1.3.6.1.2.1.14.10.1.6.[{#SNMPINDEX}]</key><delay>60</delay><value_type>FLOAT</value_type><applications><application><name>OPSF</name></application></applications></item_prototype></item_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$SNMP_COMMUNITY}</macro><value>FillMeIn</value></macro></macros><screens><screen><name>Performance screen</name><hsize>2</hsize><vsize>8</vsize><screen_items><screen_item><resourcetype>0</resourcetype><style>0</style><resource><name>Temperature</name><host>Juniper Total</host></resource><width>500</width><height>100</height><x>0</x><y>0</y><colspan>1</colspan><rowspan>1</rowspan><elements>0</elements><valign>0</valign><halign>0</halign><dynamic>0</dynamic><sort_triggers>0</sort_triggers><url/><application/><max_columns>3</max_columns></screen_item><screen_item><resourcetype>0</resourcetype><style>0</style><resource><name>CPU Utilization</name><host>Juniper Total</host></resource><width>500</width><height>100</height><x>1</x><y>0</y><colspan>1</colspan><rowspan>1</rowspan><elements>0</elements><valign>0</valign><halign>0</halign><dynamic>0</dynamic><sort_triggers>0</sort_triggers><url/><application/><max_columns>3</max_columns></screen_item><screen_item><resourcetype>0</resourcetype><style>0</style><resource><name>Memory Utilization</name><host>Juniper Total</host></resource><width>500</width><height>100</height><x>0</x><y>1</y><colspan>2</colspan><rowspan>1</rowspan><elements>0</elements><valign>0</valign><halign>0</halign><dynamic>0</dynamic><sort_triggers>0</sort_triggers><url/><application/><max_columns>3</max_columns></screen_item><screen_item><resourcetype>0</resourcetype><style>0</style><resource><name>ICMP Response</name><host>Juniper Total</host></resource><width>500</width><height>100</height><x>0</x><y>3</y><colspan>1</colspan><rowspan>1</rowspan><elements>0</elements><valign>0</valign><halign>0</halign><dynamic>0</dynamic><sort_triggers>0</sort_triggers><url/><application/><max_columns>3</max_columns></screen_item><screen_item><resourcetype>0</resourcetype><style>0</style><resource><name>ICMP Time</name><host>Juniper Total</host></resource><width>500</width><height>100</height><x>1</x><y>3</y><colspan>1</colspan><rowspan>1</rowspan><elements>0</elements><valign>0</valign><halign>0</halign><dynamic>0</dynamic><sort_triggers>0</sort_triggers><url/><application/><max_columns>3</max_columns></screen_item><screen_item><resourcetype>20</resourcetype><style>0</style><resource><name>Interface {#SNMPVALUE} Traffic</name><host>Juniper Total</host></resource><width>500</width><height>100</height><x>0</x><y>5</y><colspan>2</colspan><rowspan>1</rowspan><elements>0</elements><valign>0</valign><halign>0</halign><dynamic>0</dynamic><sort_triggers>0</sort_triggers><url/><application/><max_columns>2</max_columns></screen_item><screen_item><resourcetype>20</resourcetype><style>0</style><resource><name>Interface {#SNMPVALUE} Discards and Errors</name><host>Juniper Total</host></resource><width>500</width><height>100</height><x>0</x><y>6</y><colspan>2</colspan><rowspan>1</rowspan><elements>0</elements><valign>0</valign><halign>0</halign><dynamic>0</dynamic><sort_triggers>0</sort_triggers><url/><application/><max_columns>2</max_columns></screen_item></screen_items></screen></screens></template></templates><graphs><graph><name>CPU Utilization</name><graph_items><graph_item><color>1A7C11</color><item><host>Juniper Total</host><key>Junos.CPU</key></item></graph_item></graph_items></graph><graph><name>ICMP Response</name><graph_items><graph_item><color>1A7C11</color><item><host>Juniper Total</host><key>icmpping[,,,,]</key></item></graph_item></graph_items></graph><graph><name>ICMP Time</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>EE0000</color><item><host>Juniper Total</host><key>icmppingsec[,,,,,]</key></item></graph_item></graph_items></graph><graph><name>Memory Utilization</name><graph_items><graph_item><color>1A7C11</color><item><host>Juniper Total</host><key>Junos.Mem</key></item></graph_item></graph_items></graph><graph><name>Temperature</name><graph_items><graph_item><color>EE0000</color><item><host>Juniper Total</host><key>Junos.Temp</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
