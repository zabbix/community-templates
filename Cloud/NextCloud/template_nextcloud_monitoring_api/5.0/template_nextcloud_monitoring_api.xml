<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2021-11-21T21:39:12Z</date><groups><group><name>Templates</name></group></groups><templates><template><template>App Nextcloud Monitoring API</template><name>App Nextcloud Monitoring API</name><description>## Overview

Nextcloud Monitoring API integration for Zabbix 3.4


Needs **curl** to be installed on the Nextcloud server.


**You need to set the macros according to your environment.**


Fully compatible with Nextcloud versions 14 - 17.


Shows different operating values of your Nextcloud server:


Version  
Webserver  
Database Type  
Database Version  
Database Size  
PHP Max. Execution Time  
PHP Memory Limit  
PHP Upload Max. Filesize  
PHP Version  
Storage Files  
Storage Freespace  
Storage Users  
Number of Storages  
Apps Installed  
Apps Needing Update



</description><groups><group><name>Templates</name></group></groups><applications><application><name>Nextcloud</name></application></applications><items><item><name>Nextcloud PHP Max. Execution Time</name><type>DEPENDENT</type><key>nextcloud.php.maxexectime</key><delay>0</delay><units>s</units><description>Nextcloud PHP Max. Execution Time</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>number(/ocs/data/server/php/max_execution_time)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud PHP Memory Limit</name><type>DEPENDENT</type><key>nextcloud.php.memlimit</key><delay>0</delay><units>B</units><description>Nextcloud PHP Memory Limit</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>number(/ocs/data/server/php/memory_limit)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud PHP Upload Max. Filesize</name><type>DEPENDENT</type><key>nextcloud.php.upmaxfilesize</key><delay>0</delay><units>B</units><description>Nextcloud PHP Upload Max. Filesize</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>number(/ocs/data/server/php/upload_max_filesize)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud PHP Version</name><type>DEPENDENT</type><key>nextcloud.php.version</key><delay>0</delay><trends>0</trends><value_type>TEXT</value_type><description>Nextcloud PHP Version</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>string(/ocs/data/server/php/version)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Database Size</name><type>DEPENDENT</type><key>nextcloud.server.database.size</key><delay>0</delay><units>B</units><description>Nextcloud Dababase Type</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>number(/ocs/data/server/database/size)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Database Type</name><type>DEPENDENT</type><key>nextcloud.server.database.type</key><delay>0</delay><trends>0</trends><value_type>TEXT</value_type><description>Nextcloud Dababase Type</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>string(/ocs/data/server/database/type)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Database Version</name><type>DEPENDENT</type><key>nextcloud.server.database.version</key><delay>0</delay><trends>0</trends><value_type>TEXT</value_type><description>Nextcloud Dababase Version</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>string(/ocs/data/server/database/version)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Webserver</name><type>DEPENDENT</type><key>nextcloud.server.webserver</key><delay>0</delay><trends>0</trends><value_type>TEXT</value_type><description>Nextcloud Webserver</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>string(/ocs/data/server/webserver)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Storage Freespace</name><type>DEPENDENT</type><key>nextcloud.storage.freespace</key><delay>0</delay><units>B</units><description>Nextcloud Storage Freespace</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>number(/ocs/data/nextcloud/system/freespace)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Storage Files</name><type>DEPENDENT</type><key>nextcloud.storage.numfiles</key><delay>0</delay><description>Nextcloud Storage Files</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>number(/ocs/data/nextcloud/storage/num_files)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Number of Storages</name><type>DEPENDENT</type><key>nextcloud.storage.numstorages</key><delay>0</delay><description>Nextcloud Number of Storages</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>number(/ocs/data/nextcloud/storage/num_storages)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Storage Users</name><type>DEPENDENT</type><key>nextcloud.storage.numusers</key><delay>0</delay><description>Nextcloud Storage Users</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>number(/ocs/data/nextcloud/storage/num_users)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Apps Needing Update</name><type>DEPENDENT</type><key>nextcloud.system.apps.needingupdate</key><delay>0</delay><description>Nextcloud Apps Needing Update</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>string(/ocs/data/nextcloud/system/apps/num_updates_available)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item><triggers><trigger><expression>{last()}&gt;0</expression><name>Nextcloud Application Updates available</name><priority>INFO</priority></trigger></triggers></item><item><name>Nextcloud Apps Installed</name><type>DEPENDENT</type><key>nextcloud.system.apps.numinstalled</key><delay>0</delay><description>Nextcloud Apps Installed</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>string(/ocs/data/nextcloud/system/apps/num_installed)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Version</name><type>DEPENDENT</type><key>nextcloud.system.version</key><delay>0</delay><trends>0</trends><value_type>TEXT</value_type><description>Nextcloud Version</description><applications><application><name>Nextcloud</name></application></applications><preprocessing><step><type>XMLPATH</type><params>string(/ocs/data/nextcloud/system/version)</params></step></preprocessing><master_item><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key></master_item></item><item><name>Nextcloud Monitoring API</name><key>system.run[curl -s --user {$CLOUD_ADMIN_USER}:{$CLOUD_ADMIN_PW}  {$HTTP_OR_HTTPS}://{$FQDN_NEXTCLOUD}/ocs/v2.php/apps/serverinfo/api/v1/info]</key><history>7d</history><trends>0</trends><value_type>TEXT</value_type><description>Master Item - Nextcloud Monitoring API</description><applications><application><name>Nextcloud</name></application></applications></item></items><macros><macro><macro>{$CLOUD_ADMIN_PW}</macro><value>password</value></macro><macro><macro>{$CLOUD_ADMIN_USER}</macro><value>user</value></macro><macro><macro>{$FQDN_NEXTCLOUD}</macro><value>nextcloud.domain.com</value></macro><macro><macro>{$HTTP_OR_HTTPS}</macro><value>https</value></macro></macros></template></templates></zabbix_export>
