<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2021-11-21T22:01:32Z</date><groups><group><name>Templates/Storage</name></group></groups><templates><template><template>HPE 3PAR SMI-S for shareZabbix</template><name>HPE 3PAR SMI-S for shareZabbix</name><description>## Overview

Tested on HPE\_3PAR 8450, HPE\_3PAR 20840\_R2


Python-script to get metrics from HP 3Par Storage. Script uses SMI-S interface.


This script get next metrics:


Battery, CagePowerSupply, DiskDrive, DriveCage, DynamicStoragePool, EthernetPort, Fan, FCPort, IDEDrive, NodePowerSupply, NodeSystem, PCICard, PhysicalMemory, SASPort



</description><groups><group><name>Templates/Storage</name></group></groups><applications><application><name>Battery</name></application><application><name>CagePowerSupply</name></application><application><name>Discovery</name></application><application><name>DiskDrive</name></application><application><name>DriveCage</name></application><application><name>DynamicStoragePool</name></application><application><name>EthernetPort</name></application><application><name>Fan</name></application><application><name>FCPort</name></application><application><name>IDEDrive</name></application><application><name>NodePowerSupply</name></application><application><name>NodeSystem</name></application><application><name>PCICard</name></application><application><name>PhysicalMemory</name></application><application><name>SASPort</name></application></applications><items><item><name>Get Discovery</name><type>EXTERNAL</type><key>hp_3par_get_state_wbem.py[&quot;--hp_ip={HOST.IP}&quot;, &quot;--hp_port={$SMI_S_PORT}&quot;, &quot;--hp_user={$HP_USER}&quot;, &quot;--hp_password={$HP_PASSWORD}&quot;, &quot;--storage_name={HOST.NAME}&quot;, &quot;--discovery&quot;]</key><delay>1h</delay><applications><application><name>Discovery</name></application></applications></item><item><name>Get Overprovisioning CPG</name><type>EXTERNAL</type><key>hp_3par_get_state_wbem.py[&quot;--hp_ip={HOST.IP}&quot;, &quot;--hp_port={$SMI_S_PORT}&quot;, &quot;--hp_user={$HP_USER}&quot;, &quot;--hp_password={$HP_PASSWORD}&quot;, &quot;--storage_name={HOST.NAME}&quot;, &quot;--overprovisioning&quot;]</key><delay>15m</delay><status>DISABLED</status><applications><application><name>Discovery</name></application></applications></item><item><name>Get Status</name><type>EXTERNAL</type><key>hp_3par_get_state_wbem.py[&quot;--hp_ip={HOST.IP}&quot;, &quot;--hp_port={$SMI_S_PORT}&quot;, &quot;--hp_user={$HP_USER}&quot;, &quot;--hp_password={$HP_PASSWORD}&quot;, &quot;--storage_name={HOST.NAME}&quot;, &quot;--status&quot;]</key><delay>3m</delay><applications><application><name>Discovery</name></application></applications><triggers><trigger><expression>{last()}=1000</expression><name>{HOST.NAME} -&gt; Cannot get metrics from storage</name><priority>AVERAGE</priority></trigger><trigger><expression>{last()}=1100</expression><name>{HOST.NAME} -&gt; Connect to storage is failed</name><priority>AVERAGE</priority></trigger><trigger><expression>{nodata(3600)}=1</expression><name>{HOST.NAME} -&gt; No data from storage for 1 hours</name><priority>AVERAGE</priority></trigger><trigger><expression>{count(2h,2,eq)}&gt;35</expression><name>{HOST.NAME} -&gt; Processing metrics by zabbix is failed</name><priority>AVERAGE</priority></trigger><trigger><expression>{count(2h,1,eq)}&gt;35</expression><name>{HOST.NAME} -&gt; Sending metrics to zabbix is failed</name><priority>AVERAGE</priority></trigger></triggers></item></items><discovery_rules><discovery_rule><name>Battery</name><type>TRAP</type><key>Battery</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of a Battery &quot;{#DEVICE_ID}&quot;</name><type>TRAP</type><key>health.Battery.[{#DEVICE_ID}]</key><delay>0</delay><applications><application><name>Battery</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; Battery &quot;{#DEVICE_ID}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of a Battery &quot;{#DEVICE_ID}&quot;</name><type>TRAP</type><key>oper.Battery.[{#DEVICE_ID}]</key><delay>0</delay><applications><application><name>Battery</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; Battery &quot;{#DEVICE_ID}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>CagePowerSupply</name><type>TRAP</type><key>CagePowerSupply</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of &quot;{#CAGE_NAME} - {#NUMBER_PSU}&quot;</name><type>TRAP</type><key>health.CagePowerSupply.[{#DEVICE_ID}]</key><delay>0</delay><applications><application><name>CagePowerSupply</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; &quot;{#NUMBER_PSU} - {#CAGE_NAME} - {#SERIAL_NUMBER_PSU}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of &quot;{#CAGE_NAME} - {#NUMBER_PSU}&quot;</name><type>TRAP</type><key>oper.CagePowerSupply.[{#DEVICE_ID}]</key><delay>0</delay><applications><application><name>CagePowerSupply</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; &quot;{#NUMBER_PSU} - {#CAGE_NAME} - {#SERIAL_NUMBER_PSU}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>DiskDrive</name><type>TRAP</type><key>DiskDrive</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of a DiskDrive &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>health.DiskDrive.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>DiskDrive</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; DiskDrive &quot;{#ELEMENT_NAME}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of a DiskDrive &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>oper.DiskDrive.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>DiskDrive</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; DiskDrive &quot;{#ELEMENT_NAME}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority><dependencies><dependency><name>{HOST.NAME} -&gt; DiskDrive &quot;{#ELEMENT_NAME}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><expression>{HPE 3PAR SMI-S for shareZabbix:health.DiskDrive.[{#ELEMENT_NAME}].count(#3,5,ne)}&gt;2</expression></dependency></dependencies></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>DriveCage</name><type>TRAP</type><key>DriveCage</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of a DriveCage &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>health.DriveCage.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>DriveCage</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; DriveCage &quot;{#ELEMENT_NAME}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of a DriveCage &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>oper.DriveCage.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>DriveCage</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; DriveCage &quot;{#ELEMENT_NAME}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>DynamicStoragePool</name><type>TRAP</type><key>DynamicStoragePool</key><delay>0</delay><lifetime>5d</lifetime><item_prototypes><item_prototype><name>Health status of a DynamicStoragePool &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>health.DynamicStoragePool.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>DynamicStoragePool</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; DynamicStoragePool &quot;{#ELEMENT_NAME}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of a DynamicStoragePool &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>oper.DynamicStoragePool.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>DynamicStoragePool</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; DynamicStoragePool &quot;{#ELEMENT_NAME}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Overprovisioning of a DynamicStoragePool &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>overprv.DynamicStoragePool.[{#ELEMENT_NAME}]</key><delay>0</delay><value_type>FLOAT</value_type><units>%</units><applications><application><name>DynamicStoragePool</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>100</params></step></preprocessing><trigger_prototypes><trigger_prototype><expression>{last()}&gt;{$OVERPROVISION:&quot;{#ELEMENT_NAME}&quot;}</expression><name>{HOST.NAME} -&gt; Overprovision on DynamicStoragePool &quot;{#ELEMENT_NAME}&quot; &gt; {$OVERPROVISION:&quot;{#ELEMENT_NAME}&quot;}%</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>EthernetPort</name><type>TRAP</type><key>EthernetPort</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of a EthernetPort &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>health.EthernetPort.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>EthernetPort</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; EthernetPort &quot;{#ELEMENT_NAME}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of a EthernetPort &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>oper.EthernetPort.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>EthernetPort</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>({TRIGGER.VALUE}=0 and {last()}&lt;&gt;2 and {change()}&lt;&gt;0) or ({TRIGGER.VALUE}=1 and {last()}&lt;&gt;2)</expression><name>{HOST.NAME} -&gt; EthernetPort &quot;{#ELEMENT_NAME}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Other operational status of a EthernetPort &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>other.oper.EthernetPort.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>EthernetPort</name></application></applications><valuemap><name>CIM HPE 3PAR SAS FC Port OtherOperationalStatus</name></valuemap><trigger_prototypes><trigger_prototype><expression>({TRIGGER.VALUE}=0 and {last()}&lt;&gt;3 and {change()}&lt;&gt;0) or ({TRIGGER.VALUE}=1 and {last()}&lt;&gt;3)</expression><name>{HOST.NAME} -&gt; EthernetPort &quot;{#ELEMENT_NAME}&quot; other operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>Fan</name><type>TRAP</type><key>Fan</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of a Fan &quot;{#DEVICE_ID}&quot;</name><type>TRAP</type><key>health.Fan.[{#DEVICE_ID}]</key><delay>0</delay><applications><application><name>Fan</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; Fan &quot;{#DEVICE_ID}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of a Fan &quot;{#DEVICE_ID}&quot;</name><type>TRAP</type><key>oper.Fan.[{#DEVICE_ID}]</key><delay>0</delay><applications><application><name>Fan</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; Fan &quot;{#DEVICE_ID}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>FCPort</name><type>TRAP</type><key>FCPort</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of a FCPort &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>health.FCPort.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>FCPort</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; FCPort &quot;{#ELEMENT_NAME}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of a FCPort &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>oper.FCPort.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>FCPort</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{prev()}=2 and {last()}&lt;&gt;2</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{last()}=2</recovery_expression><name>{HOST.NAME} -&gt; FCPort &quot;{#ELEMENT_NAME}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority><description>Предыдущее триггерное выражение:&#13;
({TRIGGER.VALUE}=0 and {Template HPE 3PAR SMI-S:oper.FCPort.[{#ELEMENT_NAME}].last()}&lt;&gt;2 and {Template HPE 3PAR SMI-S:oper.FCPort.[{#ELEMENT_NAME}].change()}&lt;&gt;0) or ({TRIGGER.VALUE}=1 and {Template HPE 3PAR SMI-S:oper.FCPort.[{#ELEMENT_NAME}].last()}&lt;&gt;2)</description></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Other operational status of a FCPort &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>other.oper.FCPort.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>FCPort</name></application></applications><valuemap><name>CIM HPE 3PAR SAS FC Port OtherOperationalStatus</name></valuemap><trigger_prototypes><trigger_prototype><expression>{prev()}=3 and {last()}&lt;&gt;3</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{last()}=3</recovery_expression><name>{HOST.NAME} -&gt; FCPort &quot;{#ELEMENT_NAME}&quot; other operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority><description>Предыдущее триггерное выражение:&#13;
({TRIGGER.VALUE}=0 and {Template HPE 3PAR SMI-S:other.oper.FCPort.[{#ELEMENT_NAME}].last()}&lt;&gt;3 and {Template HPE 3PAR SMI-S:other.oper.FCPort.[{#ELEMENT_NAME}].change()}&lt;&gt;0) or ({TRIGGER.VALUE}=1 and {Template HPE 3PAR SMI-S:other.oper.FCPort.[{#ELEMENT_NAME}].last()}&lt;&gt;3)</description></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>IDEDrive</name><type>TRAP</type><key>IDEDrive</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Operational status of IDEDrive &quot;{#TAG}&quot;</name><type>TRAP</type><key>oper.IDEDrive.[{#TAG}]</key><delay>0</delay><applications><application><name>IDEDrive</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; IDEDrive &quot;{#TAG}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>NodePowerSupply</name><type>TRAP</type><key>NodePowerSupply</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of &quot;{#NODE_NAME} - {#NUMBER_PSU}&quot;</name><type>TRAP</type><key>health.NodePowerSupply.[{#DEVICE_ID}]</key><delay>0</delay><applications><application><name>NodePowerSupply</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; &quot;{#NUMBER_PSU} - {#NODE_NAME} - {#SERIAL_NUMBER_PSU}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of &quot;{#NODE_NAME} - {#NUMBER_PSU}&quot;</name><type>TRAP</type><key>oper.NodePowerSupply.[{#DEVICE_ID}]</key><delay>0</delay><applications><application><name>NodePowerSupply</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; &quot;{#NUMBER_PSU} - {#NODE_NAME} - {#SERIAL_NUMBER_PSU}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>NodeSystem</name><type>TRAP</type><key>NodeSystem</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of Node &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>health.NodeSystem.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>NodeSystem</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; NodeSystem &quot;{#ELEMENT_NAME}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>LED status of Node &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>led.NodeSystem.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>NodeSystem</name></application></applications><valuemap><name>CIM LED Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2 and {count(#3,3,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; NodeSystem &quot;{#ELEMENT_NAME}&quot; LED status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of Node &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>oper.NodeSystem.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>NodeSystem</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; NodeSystem &quot;{#ELEMENT_NAME}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>PCICard</name><type>TRAP</type><key>PCICard</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Operational status of PCICard &quot;{#MANUFACTURER}-{#TAG}&quot;</name><type>TRAP</type><key>oper.PCICard.[{#TAG}]</key><delay>0</delay><applications><application><name>PCICard</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; PCICard &quot;{#MANUFACTURER}-{#TAG}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>PhysicalMemory</name><type>TRAP</type><key>PhysicalMemory</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Operational status of PhysicalMemory module &quot;{#SERIAL_NUMBER}&quot;</name><type>TRAP</type><key>oper.PhysicalMemory.[{#SERIAL_NUMBER}]</key><delay>0</delay><applications><application><name>PhysicalMemory</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,2,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; PhysicalMemory &quot;{#SERIAL_NUMBER}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>SASPort</name><type>TRAP</type><key>SASPort</key><delay>0</delay><lifetime>3d</lifetime><item_prototypes><item_prototype><name>Health status of SASPort &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>health.SASPort.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>SASPort</name></application></applications><valuemap><name>CIM Health Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{count(#3,5,ne)}&gt;2</expression><name>{HOST.NAME} -&gt; SASPort &quot;{#ELEMENT_NAME}&quot; health status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Operational status of SASPort &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>oper.SASPort.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>SASPort</name></application></applications><valuemap><name>CIM Operational Status</name></valuemap><trigger_prototypes><trigger_prototype><expression>{prev()}=2 and {last()}&lt;&gt;2</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{last()}=2</recovery_expression><name>{HOST.NAME} -&gt; SASPort &quot;{#ELEMENT_NAME}&quot; operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Other operational status of SASPort &quot;{#ELEMENT_NAME}&quot;</name><type>TRAP</type><key>other.oper.SASPort.[{#ELEMENT_NAME}]</key><delay>0</delay><applications><application><name>SASPort</name></application></applications><valuemap><name>CIM HPE 3PAR SAS FC Port OtherOperationalStatus</name></valuemap><trigger_prototypes><trigger_prototype><expression>{prev()}=3 and {last()}&lt;&gt;3</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{last()}=3</recovery_expression><name>{HOST.NAME} -&gt; SASPort &quot;{#ELEMENT_NAME}&quot; other operational status is &quot;{ITEM.VALUE}&quot;</name><opdata>Current Value: {ITEM.LASTVALUE}</opdata><priority>HIGH</priority></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$HP_PASSWORD}</macro></macro><macro><macro>{$HP_USER}</macro></macro><macro><macro>{$OVERPROVISION}</macro><value>90</value></macro><macro><macro>{$SMI_S_PORT}</macro><value>5989</value></macro></macros></template></templates><value_maps><value_map><name>CIM Health Status</name><mappings><mapping><value>0</value><newvalue>Unknown</newvalue></mapping><mapping><value>5</value><newvalue>OK</newvalue></mapping><mapping><value>10</value><newvalue>Degraded/Warning</newvalue></mapping><mapping><value>15</value><newvalue>Minor failure</newvalue></mapping><mapping><value>20</value><newvalue>Major failure</newvalue></mapping><mapping><value>25</value><newvalue>Critical failure</newvalue></mapping><mapping><value>30</value><newvalue>Non-recoverable Error</newvalue></mapping></mappings></value_map><value_map><name>CIM HPE 3PAR SAS FC Port OtherOperationalStatus</name><mappings><mapping><value>0</value><newvalue>Config Wait</newvalue></mapping><mapping><value>1</value><newvalue>Alpa Wait</newvalue></mapping><mapping><value>2</value><newvalue>Login Wait</newvalue></mapping><mapping><value>3</value><newvalue>OK</newvalue></mapping><mapping><value>4</value><newvalue>Loss Sync</newvalue></mapping><mapping><value>5</value><newvalue>Nonparticipate</newvalue></mapping><mapping><value>6</value><newvalue>Core Dump</newvalue></mapping><mapping><value>7</value><newvalue>Offline</newvalue></mapping><mapping><value>8</value><newvalue>FW Dead</newvalue></mapping><mapping><value>9</value><newvalue>Link Idle For Reset</newvalue></mapping><mapping><value>10</value><newvalue>DHCP In Progress</newvalue></mapping><mapping><value>11</value><newvalue>Pending Reset</newvalue></mapping></mappings></value_map><value_map><name>CIM LED Status</name><mappings><mapping><value>0</value><newvalue>Unknown</newvalue></mapping><mapping><value>1</value><newvalue>Off</newvalue></mapping><mapping><value>2</value><newvalue>Green</newvalue></mapping><mapping><value>3</value><newvalue>Green Blinking</newvalue></mapping><mapping><value>4</value><newvalue>Amber</newvalue></mapping><mapping><value>5</value><newvalue>Amber Blinking</newvalue></mapping></mappings></value_map><value_map><name>CIM Operational Status</name><mappings><mapping><value>0</value><newvalue>Unknown</newvalue></mapping><mapping><value>1</value><newvalue>Other</newvalue></mapping><mapping><value>2</value><newvalue>Ok</newvalue></mapping><mapping><value>3</value><newvalue>Degraded</newvalue></mapping><mapping><value>4</value><newvalue>Stressed</newvalue></mapping><mapping><value>5</value><newvalue>Predictive Failure</newvalue></mapping><mapping><value>6</value><newvalue>Error</newvalue></mapping><mapping><value>7</value><newvalue>Non-Recoverable Error</newvalue></mapping><mapping><value>8</value><newvalue>Starting</newvalue></mapping><mapping><value>9</value><newvalue>Stopping</newvalue></mapping><mapping><value>10</value><newvalue>Stopped</newvalue></mapping><mapping><value>11</value><newvalue>In Service</newvalue></mapping><mapping><value>12</value><newvalue>No Contact</newvalue></mapping><mapping><value>13</value><newvalue>Lost Communication</newvalue></mapping><mapping><value>14</value><newvalue>Aborted</newvalue></mapping><mapping><value>15</value><newvalue>Dormant</newvalue></mapping><mapping><value>16</value><newvalue>Supporting Entity in Error</newvalue></mapping><mapping><value>17</value><newvalue>Completed</newvalue></mapping><mapping><value>18</value><newvalue>Power Mode</newvalue></mapping><mapping><value>19</value><newvalue>Relocating</newvalue></mapping></mappings></value_map></value_maps></zabbix_export>
